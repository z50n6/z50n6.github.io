<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/03/10/hello-world/"/>
      <url>/2025/03/10/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Linux基本命令</title>
      <link href="/2025/02/02/linux/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/"/>
      <url>/2025/02/02/linux/Linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h1 id="1、Linux目录介绍"><a href="#1、Linux目录介绍" class="headerlink" title="1、Linux目录介绍"></a>1、Linux目录介绍</h1><blockquote><p><code>小技巧</code></p><ul><li>ctrl+shift+&#x3D;放大终端窗口的字体显示</li><li>ctrl+ - 缩小终端窗口的字体显示</li><li>ctrl +u 清除光标前的内容</li></ul></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/ 操作系统的启动路径根路径</span><br><span class="line">/bin--普通用户和管理员都可以执行的命令字</span><br><span class="line">/sbin-只有管理员才能执行的命令  关机重启</span><br><span class="line">/boot--引导主引导目录独立的分区启动菜单内核</span><br><span class="line">/dev ---device设备设备文件存放目录</span><br><span class="line">/etc-配置文件存放目录</span><br><span class="line">/home --普通用户的家目录</span><br><span class="line">/root --管理员的家目录</span><br><span class="line">/media --光驱的挂载目录</span><br><span class="line">/mnt  --临时设备的挂载目录</span><br><span class="line">/proc  --里面的数据都在内存中,进程的所在目录</span><br><span class="line">/tmp    --临时文件存放目录</span><br><span class="line">/usr   ---软件的安装目录</span><br><span class="line">/var   ---常变文件存放目录</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/20c34fb982c142a8b3874db6849745f6.png" alt="在这里插入图片描述"></p><h1 id="2、-Linux系统优化"><a href="#2、-Linux系统优化" class="headerlink" title="2、 Linux系统优化"></a>2、 Linux系统优化</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭防火墙 方式1</span></span><br><span class="line">systemctl stop firewalld.serivce</span><br><span class="line">systemctl disable firewalld.service</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭防火墙 方式2</span></span><br><span class="line">firewall-cmd --set-default-zone=trusted</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">关闭虚拟化</span></span><br><span class="line">systemctl stop libvirtd.service</span><br><span class="line">systemctl disable libvirtd.service</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">关闭selinux</span></span><br><span class="line">gedit /etc/selinux/config</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">修改</span></span><br><span class="line">SELINUX=disable</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/076b5b67a9e743e7992b217f8210520f.png" alt="在这里插入图片描述"></p><h1 id="3、Linux终端命令格式"><a href="#3、Linux终端命令格式" class="headerlink" title="3、Linux终端命令格式"></a>3、Linux终端命令格式</h1><h3 id="0-1-终端命令格式"><a href="#0-1-终端命令格式" class="headerlink" title="0.1. 终端命令格式"></a>0.1. 终端命令格式</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">command</span> [-options] [parameter]</span><br></pre></td></tr></table></figure><p>说明：</p><ul><li><code>command</code>:命令名</li><li><code>[-options]:</code>选项，可用来对命令进行控制，可以<strong>省略</strong></li><li><code>parameter</code>:传递给命令参数 ，可以是<strong>零个，一个，或者多个</strong></li></ul><blockquote><p><code>[]</code> 代表可选</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> pycharm  </span><br><span class="line"><span class="built_in">ls</span> -l pycharm</span><br></pre></td></tr></table></figure><ul><li>&#x3D;&#x3D;开启多个终端&#x3D;&#x3D;</li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">1.右键新建窗口</span></span><br><span class="line"><span class="string">2.ctrl + alt +t  在家目录下新建</span></span><br><span class="line"><span class="string">3.ctrl + shift + n   在当前目录下新建</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><h3 id="0-2-man查阅帮助信息"><a href="#0-2-man查阅帮助信息" class="headerlink" title="0.2. man查阅帮助信息"></a>0.2. man查阅帮助信息</h3><p>说明：</p><ul><li>查阅 <code>command</code> 命令使用手册</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man <span class="built_in">command</span></span><br></pre></td></tr></table></figure><table><thead><tr><th align="center">快捷键</th><th align="center">功能说明</th></tr></thead><tbody><tr><td align="center">q</td><td align="center">退出使用手册</td></tr><tr><td align="center">↑</td><td align="center">向上翻一行</td></tr><tr><td align="center">↓</td><td align="center">向下翻一行</td></tr><tr><td align="center">Pgup</td><td align="center">向上翻一页</td></tr><tr><td align="center">Pgdn</td><td align="center">向下翻一页</td></tr></tbody></table><h1 id="4、文件和目录常用命令"><a href="#4、文件和目录常用命令" class="headerlink" title="4、文件和目录常用命令"></a>4、文件和目录常用命令</h1><h3 id="0-1-echo-文字内容"><a href="#0-1-echo-文字内容" class="headerlink" title="0.1. echo 文字内容"></a>0.1. echo 文字内容</h3><ul><li><code>echo</code> 会在终端中显示参数指定的文字，通常会和<strong>重定向</strong>联合使用</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> hello</span><br></pre></td></tr></table></figure><h3 id="0-2-重定向-和"><a href="#0-2-重定向-和" class="headerlink" title="0.2. 重定向 &gt; 和&gt;&gt;"></a>0.2. 重定向 &gt; 和&gt;&gt;</h3><ul><li><p>Linux允许将命令执行结果<strong>重定向</strong>到一个<strong>文件</strong></p></li><li><p>将本应显示在<strong>终端</strong>上的内容 <strong>输出&#x2F;追加</strong>到指定文件中</p></li></ul><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>&gt;</td><td>表示输出，回覆盖文件原有的内容</td></tr><tr><td>&gt;&gt;</td><td>表示追加，会将内容追加到已有文件的末尾</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ll -lh &gt;&gt; text.txt </span><br><span class="line"><span class="comment">#将ll -lh命令的输出追加到test.txt</span></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> HelloPython &gt; a</span><br></pre></td></tr></table></figure><h3 id="0-3-管道符"><a href="#0-3-管道符" class="headerlink" title="0.3. 管道符 |"></a>0.3. 管道符 |</h3><ul><li>Linux允许将<strong>一个命令的输出</strong> 可以<strong>通过管道</strong> 作为<strong>另一个命令的输入</strong></li></ul><p><strong>&#x3D;&#x3D;常用的管道命令有&#x3D;&#x3D;：</strong></p><ul><li><code>more</code> 分屏显示内容</li><li><code>grep</code> 在命令执行结果的基础上查询指定文本</li></ul><hr><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">将左边的输出当做右边的输入</span><br><span class="line"><span class="built_in">ls</span> -lha ~ | more</span><br><span class="line"><span class="built_in">ls</span> -lha ~ | grep Do</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="0-4-pwd-查看当前路径"><a href="#0-4-pwd-查看当前路径" class="headerlink" title="0.4. pwd 查看当前路径"></a>0.4. pwd 查看当前路径</h3><blockquote><p><strong>print work directory</strong></p></blockquote><h3 id="0-5-ls查看目录文件"><a href="#0-5-ls查看目录文件" class="headerlink" title="0.5. ls查看目录文件"></a>0.5. ls查看目录文件</h3><blockquote><p><strong>ls</strong> ——&gt; <strong>list</strong>  <strong>查看当前文件夹下的内容</strong></p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-a</td><td>显示隐藏文件</td></tr><tr><td>-l</td><td>以列表的形式显示</td></tr><tr><td>-h</td><td>以人性化的方式显示文件内容大小</td></tr><tr><td>-R</td><td>递归显示子目录</td></tr></tbody></table><h3 id="0-6-cd-切换工作路径"><a href="#0-6-cd-切换工作路径" class="headerlink" title="0.6. cd 切换工作路径"></a>0.6. cd 切换工作路径</h3><blockquote><p><strong>change directory</strong></p></blockquote><p><strong>绝对路径</strong>：</p><blockquote><p>指的是在输入路径时，最前面是&#x2F;或者~表示从 根目录&#x2F;家目录开始的具体目录位置</p></blockquote><p><strong>相对路径</strong>：</p><blockquote><p>指的是以当前目录开始，不以&#x2F;或者 ~开头，表示不是根目录或家目录开始的目录</p></blockquote><table><thead><tr><th>命令</th><th>含义</th></tr></thead><tbody><tr><td>cd</td><td>命令可以改变相对路径和绝对路径</td></tr><tr><td>cd[路径]</td><td>切换到指定路径</td></tr><tr><td>cd ~</td><td>切换到家目录</td></tr><tr><td>cd .</td><td>切换到当前目录</td></tr><tr><td>cd ..</td><td>切换到上一级目录</td></tr><tr><td>cd -</td><td>上一次工作目录切换</td></tr></tbody></table><h3 id="0-7-创建和删除操作"><a href="#0-7-创建和删除操作" class="headerlink" title="0.7. 创建和删除操作"></a>0.7. 创建和删除操作</h3><h4 id="0-7-1-touch创建文件"><a href="#0-7-1-touch创建文件" class="headerlink" title="0.7.1. touch创建文件"></a>0.7.1. touch创建文件</h4><ul><li>创建文件或修改文件日期<ul><li>如果文件<strong>不存在</strong>可以创建一个空白文件</li><li>如果文件<strong>已经存在</strong>，可修改文件的末次修改日期</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">touch</span> 文件名</span><br><span class="line"><span class="built_in">touch</span> 文件名 文件名   <span class="built_in">touch</span> 可以同时新建多个</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">touch</span> 文件名 </span><br></pre></td></tr></table></figure><h4 id="0-7-2-mkdir新建目录"><a href="#0-7-2-mkdir新建目录" class="headerlink" title="0.7.2. mkdir新建目录"></a>0.7.2. mkdir新建目录</h4><blockquote><p><strong>make directory</strong></p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> PythonDir</span><br><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> -p a/b/c/d 递归创建</span><br></pre></td></tr></table></figure><h4 id="0-7-3-rm删除文件或目录"><a href="#0-7-3-rm删除文件或目录" class="headerlink" title="0.7.3. rm删除文件或目录"></a>0.7.3. rm删除文件或目录</h4><blockquote><p>remove</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>递归删除目录下的内容，删除文件夹时必须加此参数</td></tr><tr><td>-f</td><td>强制删除，忽略不存在文件，无需提示</td></tr></tbody></table><h3 id="0-8-拷贝和移动文件"><a href="#0-8-拷贝和移动文件" class="headerlink" title="0.8. 拷贝和移动文件"></a>0.8. 拷贝和移动文件</h3><h4 id="0-8-1-tree"><a href="#0-8-1-tree" class="headerlink" title="0.8.1. tree"></a>0.8.1. tree</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">Ubuntu下使用sudo apt-get intall tree；</span></span><br><span class="line"><span class="string">Fedora和RedHat以及CentOS下使用 yum install tree。</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><ul><li>可以以树状图列出文件目录的结构</li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-d</td><td>只显示目录</td></tr></tbody></table><h4 id="0-8-2-mv-移动和重命名"><a href="#0-8-2-mv-移动和重命名" class="headerlink" title="0.8.2. mv 移动和重命名"></a>0.8.2. mv 移动和重命名</h4><ul><li>mv命令在同一个文件夹移动文件，即重命名功能</li><li>格式：<code> mv 原文件路径 目标路径</code></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> ./demo.txt test.txt</span><br><span class="line"><span class="comment">#重命名</span></span><br></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-f</td><td>覆盖前不询问</td></tr><tr><td>-i</td><td>覆盖前询问</td></tr><tr><td>-n</td><td>不覆盖已经存在的文件</td></tr></tbody></table><h4 id="0-8-3-cp复制"><a href="#0-8-3-cp复制" class="headerlink" title="0.8.3. cp复制"></a>0.8.3. cp复制</h4><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-i</td><td>覆盖前提示</td></tr><tr><td>-r</td><td>若给出的源文件是目录文件，则cp将递归复制该目录下的所有子目录文件，目标文件必须为一个目录名 cp src des 如果是复制文件夹，则加上-r 选项</td></tr></tbody></table><h3 id="0-9-文件统计分析"><a href="#0-9-文件统计分析" class="headerlink" title="0.9. 文件统计分析"></a>0.9. 文件统计分析</h3><h4 id="0-9-1-cat-查看文件内容，合并文件"><a href="#0-9-1-cat-查看文件内容，合并文件" class="headerlink" title="0.9.1. cat 查看文件内容，合并文件"></a>0.9.1. cat 查看文件内容，合并文件</h4><ul><li><code>cat</code>命令可以用来<strong>查看文件内容</strong>，<strong>创建文件</strong>，<strong>文件合并，追加文件内容</strong>等</li><li><code>cat</code>会一次显示所有内容，适合<strong>查看内容少的文本本件</strong></li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-b</td><td>对非空输出行编号</td></tr><tr><td>-n</td><td>对输出的所有行编号</td></tr></tbody></table><h4 id="0-9-2-more-查看文件内容（分页查看）"><a href="#0-9-2-more-查看文件内容（分页查看）" class="headerlink" title="0.9.2. more 查看文件内容（分页查看）"></a>0.9.2. more 查看文件内容（分页查看）</h4><blockquote><p>more filename  查看filename 文件的内容</p></blockquote><p>可以<strong>分屏显示</strong>文件內容，每次只显示一頁內容，適用於 <strong>查看內容較多</strong> 的文本文件</p><table><thead><tr><th align="center">快捷键</th><th align="center">功能说明</th></tr></thead><tbody><tr><td align="center">q</td><td align="center">退出</td></tr><tr><td align="center">f</td><td align="center">前滚一屏幕</td></tr><tr><td align="center">b</td><td align="center">回滚一屏幕</td></tr><tr><td align="center">空格键</td><td align="center">显示下一屏</td></tr><tr><td align="center">enter键</td><td align="center">一次滚动一行</td></tr></tbody></table><h4 id="0-9-3-grep-过滤行"><a href="#0-9-3-grep-过滤行" class="headerlink" title="0.9.3. grep 过滤行"></a>0.9.3. grep 过滤行</h4><ul><li>Linux系统中 <code>grep</code>命令是一种强大的文本搜索工具</li><li><code>grep</code>允许对文本文件进行<strong>模式查找</strong>，所谓模式查找，又被成为正则表达式，</li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-n</td><td>显示匹配行及行号</td></tr><tr><td>-v</td><td>显示不包括匹配文本的所有行（相当于求反）</td></tr><tr><td>-i</td><td>忽略大小写</td></tr><tr><td>-c</td><td>统计文件或者文本中包含匹配字符串的行数</td></tr><tr><td>-o</td><td>只显示匹配具体的内容</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep love demo.txt</span><br><span class="line"><span class="comment">#在demo.txt文件中搜索love</span></span><br><span class="line">grep -n a demo.txt</span><br><span class="line"><span class="comment">#在demo.txt文件中找a，同时返回行号</span></span><br></pre></td></tr></table></figure><blockquote><p>强大的文本搜索工具，能使用正则搜索文本，并把匹配的行打印出来</p></blockquote><ul><li><strong>-E 选项使用正则表达</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -E <span class="string">&quot;[A-Z]+&quot;</span>  filename</span><br><span class="line">grep -E <span class="string">&quot;[0-9a-z]&quot;</span> file_1 file_2 file_3...</span><br></pre></td></tr></table></figure><p>&#x3D;&#x3D;过滤出<code>/var/log/secure</code>中出现的IP地址&#x3D;&#x3D;</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">&quot;Failed password&quot;</span> /var/log/secure|grep -E -o <span class="string">&quot;(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)&quot;</span>|<span class="built_in">sort</span>|<span class="built_in">uniq</span> -c</span><br></pre></td></tr></table></figure><ul><li><strong>常用 的两种模式查找</strong></li></ul><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>^a</td><td>行首，搜寻以a开头的行</td></tr><tr><td>ke$</td><td>行尾，搜寻以ke结束的行</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">grep a$ demo.txt</span><br><span class="line">grep -n a$ demo.txt</span><br><span class="line">grep ^f demo.txt</span><br><span class="line">grep -n ^f demo.txt</span><br></pre></td></tr></table></figure><h4 id="0-9-4-less-按行阅读文档"><a href="#0-9-4-less-按行阅读文档" class="headerlink" title="0.9.4. less 按行阅读文档"></a>0.9.4. less 按行阅读文档</h4><p><a href="../../imgs/https://blog.csdn.net/xueningyang555/article/details/100142677">more与less的区别</a></p><h4 id="0-9-5-head-查看文件头，默认看10行"><a href="#0-9-5-head-查看文件头，默认看10行" class="headerlink" title="0.9.5. head 查看文件头，默认看10行"></a>0.9.5. head 查看文件头，默认看10行</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">head</span><br><span class="line">-n# 查看文件的前n行</span><br></pre></td></tr></table></figure><h4 id="0-9-6-tail-查看文件尾"><a href="#0-9-6-tail-查看文件尾" class="headerlink" title="0.9.6. tail 查看文件尾"></a>0.9.6. tail 查看文件尾</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">tail</span></span><br><span class="line">-n<span class="comment"># 查看文件的后n行</span></span><br><span class="line">-f<span class="comment"># 实时跟踪文件的变化，它会在文件末尾持续监听新的内容，并将其输出到终端，不会退出命令。  按 ctrl+c 退出</span></span><br><span class="line">-F<span class="comment"># 文件被移除并重新创建时也能继续跟踪。 </span></span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@zs Desktop]# tail -f  /var/log/secure </span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">动态显示日志内容</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/77d908d9cb6446e1b0d4d300d4f4a23b.png" alt="在这里插入图片描述"></p><h4 id="0-9-7-awk-过滤列"><a href="#0-9-7-awk-过滤列" class="headerlink" title="0.9.7. awk 过滤列"></a>0.9.7. awk 过滤列</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk -F: <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> /etc/passwd</span><br><span class="line">     -F 以冒号为分隔符</span><br><span class="line">     <span class="string">&#x27;&#123;print $1&#125;&#x27;</span> 打印第一列</span><br><span class="line">     /etc/passwd 要过滤列的文件</span><br></pre></td></tr></table></figure><p>过滤出IP地址</p><p><img src="/.com//../imgs/b8b33835e432428b97605333c28058e8.png" alt="在这里插入图片描述"></p><h4 id="0-9-8-cut-按列提取"><a href="#0-9-8-cut-按列提取" class="headerlink" title="0.9.8. cut 按列提取"></a>0.9.8. cut 按列提取</h4><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cut</span></span><br><span class="line">-d<span class="comment"># 指定字段的分隔符。</span></span><br><span class="line">-f<span class="comment"># 指定要提取的字段或列。</span></span><br><span class="line">-s<span class="comment"># 只输出包含分隔符的行。</span></span><br></pre></td></tr></table></figure><blockquote><p>&#x2F;etc&#x2F;passwd文件：系统用户配置文件，存储了系统中所有用户的基本信息，包括用户名、密码、用户 ID 和组 ID 等信息。并且所有用户都可以对此文件执行读(r)操作。</p></blockquote><p>取出&#x2F;etc&#x2F;passwd文件中的用户名</p><p><img src="/.com//../imgs/e8fd578b95e44a6591c1953e5a1f4f35.png" alt="在这里插入图片描述"></p><h4 id="0-9-9-sort-排序"><a href="#0-9-9-sort-排序" class="headerlink" title="0.9.9. sort 排序"></a>0.9.9. sort 排序</h4><p><img src="/.com//../imgs/908996b526c44e3190730e91d669f23c.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/d0167665f8814e8a9fa4d7d2dba33195.png" alt="在这里插入图片描述"></p><ul><li>-u 去除重复行</li></ul><p><img src="/.com//../imgs/d84f6fcb13d740d0aa4ce6f88daf1554.png" alt="在这里插入图片描述"></p><ul><li>-r 降序排序，默认是升序</li></ul><p><img src="/.com//../imgs/487e021b8e4f48fda3c02dc56c90f344.png" alt="在这里插入图片描述"></p><h4 id="0-9-10-du-统计文件大小"><a href="#0-9-10-du-统计文件大小" class="headerlink" title="0.9.10. du 统计文件大小"></a>0.9.10. du 统计文件大小</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-s只统计⽬录总⼤⼩，-h⼈类易读  </span><br></pre></td></tr></table></figure><h4 id="0-9-11-uniq-去重"><a href="#0-9-11-uniq-去重" class="headerlink" title="0.9.11. uniq 去重"></a>0.9.11. uniq 去重</h4><p><strong>说明</strong>：用于从排序后的文本文件或标准输入中去除重复行的命令行工具。它可以识别并删除相邻或非相邻的重复行，并<strong>将去重后的结果输出到标准输出</strong>。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">-c统计次数</span><br></pre></td></tr></table></figure><h4 id="0-9-12-wc-统计文件行数"><a href="#0-9-12-wc-统计文件行数" class="headerlink" title="0.9.12. wc 统计文件行数"></a>0.9.12. wc 统计文件行数</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-l<span class="comment"># 只显示行数</span></span><br><span class="line">-w<span class="comment"># 只显示单词数</span></span><br><span class="line">-c<span class="comment"># 只显示字节数</span></span><br></pre></td></tr></table></figure><p>统计Linux中一共有多少个用户</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">wc</span> -l /etc/passwd</span><br></pre></td></tr></table></figure><p>统计Linux中一共有多少个用户是无法登录的</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd | grep nologin | <span class="built_in">wc</span> -l<span class="comment"># 但是过滤的不准</span></span><br></pre></td></tr></table></figure><blockquote><p>在&#x2F;etc&#x2F;passwd文件中末尾为：<strong>&#x2F;sbin&#x2F;nologin</strong> 表示该用户无法登录</p><p><img src="/.com//../imgs/a22405fe022c4259a19f50c222371781.png" alt="在这里插入图片描述"></p></blockquote><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> /etc/passwd | grep -v /bin/bash | <span class="built_in">wc</span> -l</span><br></pre></td></tr></table></figure><p>说明：</p><ul><li>-v：表示用于反转匹配，即只输出那些不匹配指定模式的行。</li></ul><h4 id="0-9-13-stat-查看文件的具体存储细节和时间信息"><a href="#0-9-13-stat-查看文件的具体存储细节和时间信息" class="headerlink" title="0.9.13. stat 查看文件的具体存储细节和时间信息"></a>0.9.13. stat 查看文件的具体存储细节和时间信息</h4><p><img src="/.com//../imgs/65a01aeb82444ce19d290c79e8f14e73.png" alt="在这里插入图片描述"></p><h4 id="0-9-14-diff-比较多个文件之间的差异"><a href="#0-9-14-diff-比较多个文件之间的差异" class="headerlink" title="0.9.14. diff 比较多个文件之间的差异"></a>0.9.14. diff 比较多个文件之间的差异</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">diff file1 file2</span><br></pre></td></tr></table></figure><h4 id="0-9-15-tr-用于替换文本内容"><a href="#0-9-15-tr-用于替换文本内容" class="headerlink" title="0.9.15. tr 用于替换文本内容"></a>0.9.15. tr 用于替换文本内容</h4><p><img src="/.com//../imgs/24ec4b1a05a7472ab21a36b834325874.png" alt="在这里插入图片描述"></p><h3 id="0-10-文件查找"><a href="#0-10-文件查找" class="headerlink" title="0.10. 文件查找"></a>0.10. 文件查找</h3><h4 id="0-10-1-which"><a href="#0-10-1-which" class="headerlink" title="0.10.1. which"></a>0.10.1. which</h4><blockquote><p>提示：</p><ul><li><code>/etc/passwd</code>是用于存放用户信息的文件</li><li><code>/usr/bin/passwd</code>是用于修改用户密码的程序</li></ul></blockquote><ul><li><code>which </code>命令可以查找并显示给定命令的绝对路径</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> <span class="built_in">ls</span> <span class="comment">#  /usr/bin/ls</span></span><br><span class="line"><span class="built_in">which</span> passwd <span class="comment"># /usr/bin/passwd</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/d1efeba9377b4f85b88f731290a6b90d.png" alt="在这里插入图片描述"></p><h4 id="0-10-2-whereis"><a href="#0-10-2-whereis" class="headerlink" title="0.10.2. whereis"></a>0.10.2. whereis</h4><p>找到命令的绝对路径</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">whereis ls</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">gz帮助文件</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/24277d0030284cd1b0834ea701df7de3.png" alt="在这里插入图片描述"></p><h4 id="0-10-3-locate"><a href="#0-10-3-locate" class="headerlink" title="0.10.3. locate"></a>0.10.3. locate</h4><p>将所有目录里的所有文件生成一个数据库，通过搜索数据库快速定位想要查找的文件，使用这个命令前需要更新数据库命令：updatedb，更新后在根目录中使用locate查找文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># locate [搜索关键字]</span></span><br><span class="line"><span class="comment"># 安装</span></span><br><span class="line">yum -y install mlocate</span><br></pre></td></tr></table></figure><h4 id="0-10-4-find"><a href="#0-10-4-find" class="headerlink" title="0.10.4. find"></a>0.10.4. find</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">find</span><br><span class="line">-name# 匹配名称</span><br><span class="line">-perm# 匹配权限</span><br><span class="line">-user# 匹配所有者</span><br><span class="line">-group# 匹配组</span><br><span class="line">-exec...&#123;&#125;\;# </span><br><span class="line">-type               #查找的文件类型   d 目录  f 文件  l 链接</span><br></pre></td></tr></table></figure><ul><li><p>如果省略路径，表示在当前路径查找</p></li><li><p>通配符，在使用find 命令时同时可用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#搜索桌面目录下，文件名包含`1`的文件</span></span><br><span class="line">find  -name <span class="string">&quot;*1*&quot;</span></span><br><span class="line"><span class="comment">#搜索桌面目录下，所有以`.txt`为扩展名的文件</span></span><br><span class="line">find -name <span class="string">&quot;*.txt&quot;</span></span><br><span class="line"><span class="comment">#搜索桌面目录下，以数字`1`开头的文件</span></span><br><span class="line">find -name <span class="string">&quot;1*&quot;</span></span><br></pre></td></tr></table></figure></li></ul><p><code>-type</code>参数指定要查找的文件类型</p><p><img src="/.com//../imgs/9dd5e03ec02045cead85ec90de813a77.png" alt="在这里插入图片描述"></p><p>在桌面创建passwd目录，然后进到passwd目录里面，创建一个passwd文件，里面内容是123456</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@zs passwd]# find /root/Desktop/ -name <span class="string">&quot;passwd&quot;</span>    <span class="comment">#显示目录和文件</span></span><br><span class="line">[root@zs passwd]# find /root/Desktop/ -name <span class="string">&quot;passwd&quot;</span>  -<span class="built_in">type</span> d  <span class="comment">#只显示目录</span></span><br><span class="line">[root@zs passwd]# find /root/Desktop/ -name <span class="string">&quot;passwd&quot;</span>  -<span class="built_in">type</span> f  <span class="comment">#只显示文件</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/254c431c23e2497aa7713f27b04fb923.png" alt="在这里插入图片描述"></p><p>在根目录中将所有的zs.txt文件复制到root用户的家目录下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find / -name zs*.txt -exec cp -a &#123;&#125; /root \;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">**说明**：</span><br><span class="line"></span><br><span class="line">- /：根目录</span><br><span class="line"></span><br><span class="line">- *：表示匹配所有。</span><br><span class="line">- -exec：表示执行命令，允许在找到每个文件后执行指定的命令。</span><br><span class="line">- cp：复制命令。</span><br><span class="line">- -a：表示复制的时候，尽可能保持文件的结构和属性。</span><br><span class="line"></span><br><span class="line">- &#123;&#125;：表示查找到的东西。</span><br><span class="line"></span><br><span class="line">- /root：root用户的家目录。</span><br><span class="line"></span><br><span class="line">- \：表示结束。</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">find /boot -size +10M |xargs cp -r &#x27;&#123;&#125;&#x27; /tmp</span><br><span class="line">find /tmp -size +10M |xargs rm -rf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">find /boot -size +10M -exec cp -r &#x27;&#123;&#125;&#x27; /tmp \;</span><br></pre></td></tr></table></figure><h1 id="5、系统状态检测命令"><a href="#5、系统状态检测命令" class="headerlink" title="5、系统状态检测命令"></a>5、系统状态检测命令</h1><h3 id="0-1-查看或配置网卡信息"><a href="#0-1-查看或配置网卡信息" class="headerlink" title="0.1. 查看或配置网卡信息"></a>0.1. 查看或配置网卡信息</h3><blockquote><p>一台计算机i中可能会有一个或物理网卡，和多个虚拟网卡，在Linux中，物理网卡的名字通常以 <code>ensXX </code>表示··</p></blockquote><ul><li><code>127.0.0.1</code>本地回环&#x2F;环回地址，一般测试本机网卡是否正常</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看网卡配置信息</span></span><br><span class="line">ifconfig</span><br><span class="line"><span class="comment">#查看网卡对应的IP地址</span></span><br><span class="line">ifconfig | grep inet</span><br></pre></td></tr></table></figure><p><strong>网卡配置</strong></p><p>先查看网卡<code>ip a</code> 或者<code>ifconfig</code> 命令</p><p><img src="/.com//../imgs/26acd35c280d4a5ebda8787fa578a392.png" alt="在这里插入图片描述"></p><p>切换到配置文件的路径</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts</span><br><span class="line">ls</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/e4e40270cc314658921ed9c47048c9a7.png" alt="在这里插入图片描述"></p><p>使用<code>vim ifcfg-ens33</code>查看</p><p><img src="/.com//../imgs/bdb0032e3bda4f8c8fe626d64a8c4836.png" alt="在这里插入图片描述"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=dhcp</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NAME=ens33</span><br><span class="line">UUID=ba68ee71-854f-4389-8b51-e5d61fc15d8a</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=no</span><br></pre></td></tr></table></figure><p>里面有一些多余的，可以在命令模式下<code>光标放在首行，然后先按方向键↓ 然后2dd,在按方向键↓ 然后9dd</code> 把多余的删掉</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">BOOTPROTO=dhcp  #动态获取IP地址，可以换成static，改为手动配置固定IP地址 </span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes    #network网络配置服务 改为yes，表示启动，系统启动时激活此设备</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置静态IP地址需要加上下面几个配置</span></span><br><span class="line">===========================================================================</span><br><span class="line">GATEWAY=192.168.1.1   #默认网关 </span><br><span class="line">METMASK=&#x27;255.255.255.0&#x27;  #子网掩码</span><br><span class="line">HWADDR=00:50:56:8E:47:EE #网卡物理地址</span><br><span class="line">IPADDR=192.168.1.117  #静态IP地址</span><br><span class="line">DNS1=&#x27;192.168.1.2&#x27;  #dns服务</span><br></pre></td></tr></table></figure><p>修改完后需要重启network服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></table></figure><h3 id="0-2-测试网络连通性ping"><a href="#0-2-测试网络连通性ping" class="headerlink" title="0.2. 测试网络连通性ping"></a>0.2. 测试网络连通性ping</h3><p><strong>ping命令 检查网络是否正常通信，&#x3D;&#x3D;Linux下默认ping不会结束，使用ctrl+c强制结束&#x3D;&#x3D;</strong></p><p><strong>示例</strong> ：ping <a href="http://www.baidu.com/">www.baidu.com</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#检测到目标主机是否连接正常</span></span><br><span class="line">ping IP地址</span><br><span class="line"></span><br><span class="line"><span class="comment">#检测本地网卡工作正常</span></span><br><span class="line">ping 127.0.0.1</span><br></pre></td></tr></table></figure><table><thead><tr><th>col1</th><th>col2</th></tr></thead><tbody><tr><td>-c</td><td>指定ping几个数据包结束</td></tr><tr><td>-i</td><td>指定发送数据包的间隔，单位是秒</td></tr><tr><td>-s</td><td>指定发送数据的大小，单位字节</td></tr><tr><td>-t</td><td>设置TTL的大小，TTL网络调数大小</td></tr></tbody></table><h3 id="0-3-查看系统负载信息"><a href="#0-3-查看系统负载信息" class="headerlink" title="0.3. 查看系统负载信息"></a>0.3. 查看系统负载信息</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uptime</span><br></pre></td></tr></table></figure><h3 id="0-4-显示当前系统的内存使用量"><a href="#0-4-显示当前系统的内存使用量" class="headerlink" title="0.4. 显示当前系统的内存使用量"></a>0.4. 显示当前系统的内存使用量</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">free</span><br><span class="line">-h<span class="comment"># 以字节为单位显示内存的大小</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/efaad67c15a84293837bbbfe47fc77e8.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/3806ba2c3c7d443aa0b0adb7dc170a1e.png" alt="在这里插入图片描述"></p><h3 id="0-5-查看当前登录主机的用户终端信息"><a href="#0-5-查看当前登录主机的用户终端信息" class="headerlink" title="0.5. 查看当前登录主机的用户终端信息"></a>0.5. 查看当前登录主机的用户终端信息</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">who</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/c82e8894132442b98437be57c84c7c35.png" alt="在这里插入图片描述"></p><p>远程登录有两个：一个是操作界面，一个是下载文件的界面。</p><p>远程登录的是pts</p><p>本机登录的是tty1</p><h3 id="0-6-调取主机的被访问记录"><a href="#0-6-调取主机的被访问记录" class="headerlink" title="0.6. 调取主机的被访问记录"></a>0.6. 调取主机的被访问记录</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">last</span><br></pre></td></tr></table></figure><p>Linux系统每次的登录信息都会被记录在日志文件中，可以通过last来查看</p><p><img src="/.com//../imgs/35630ff7b80c4fcc96ddf0cc6de726e2.png" alt="在这里插入图片描述"></p><h3 id="0-7-路由追踪"><a href="#0-7-路由追踪" class="headerlink" title="0.7. 路由追踪"></a>0.7. 路由追踪</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tracepath</span><br></pre></td></tr></table></figure><h3 id="0-8-显示网络连接、路由表、接口状态等信息"><a href="#0-8-显示网络连接、路由表、接口状态等信息" class="headerlink" title="0.8. 显示网络连接、路由表、接口状态等信息"></a>0.8. 显示网络连接、路由表、接口状态等信息</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">netstat</span><br><span class="line">-r<span class="comment"># 显示系统的路由表信息</span></span><br><span class="line">-a<span class="comment"># 显示所有网络（socket）连接</span></span><br><span class="line">-ano<span class="comment"># 查看监听的端口</span></span><br><span class="line">-p<span class="comment"># 显示正在使用的网络连接</span></span><br><span class="line">-t<span class="comment"># 显示tcp协议连接状态</span></span><br><span class="line">-n<span class="comment"># 使用ip地址，不适应域名</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/88bb80a7a0ec4f5daa4a162f4487d806.png" alt="在这里插入图片描述"></p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">route </span><br><span class="line">-n</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/e2cbc8911e284c98b932e24989477ce0.png" alt="在这里插入图片描述"></p><h3 id="0-9-显示执行过的历史命令"><a href="#0-9-显示执行过的历史命令" class="headerlink" title="0.9. 显示执行过的历史命令"></a>0.9. 显示执行过的历史命令</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">history</span></span><br></pre></td></tr></table></figure><p>下图中的.bash_history文件也可以查看到历史命令<br><img src="/.com//../imgs/87ef59434ed2409e8d7c91439d332365.png" alt="在这里插入图片描述"></p><p>修改</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/profile</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/136db92bf2014869b56538f356b3ad1f.png" alt="在这里插入图片描述"></p><h1 id="6、远程管理常用命令"><a href="#6、远程管理常用命令" class="headerlink" title="6、远程管理常用命令"></a>6、远程管理常用命令</h1><h3 id="0-1-关机-重启shutdown-init"><a href="#0-1-关机-重启shutdown-init" class="headerlink" title="0.1. 关机&#x2F;重启shutdown&#x2F;init"></a>0.1. 关机&#x2F;重启shutdown&#x2F;init</h3><blockquote><p>init 0  关机<br>init 6 重启<br>poweroff 关机</p></blockquote><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>重新启动</td></tr><tr><td>now</td><td>立刻关机</td></tr></tbody></table><ul><li>不指定选项和参数，默认表示1分钟后关闭电脑</li><li>远程维护服务器时，最好不要关闭系统，而应该重启系统</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#重新启动操作系统，其中now 表示现在</span></span><br><span class="line">shutdown -r now</span><br><span class="line"></span><br><span class="line"><span class="comment">#立即关机  其中now表示现在</span></span><br><span class="line">shutdown now</span><br><span class="line"></span><br><span class="line"><span class="comment">#系统会在今天的20:25会关机</span></span><br><span class="line">shutdown 20:25</span><br><span class="line"></span><br><span class="line"><span class="comment">#系统十分钟后自动关机</span></span><br><span class="line">shutdown +10</span><br><span class="line"></span><br><span class="line"><span class="comment">#取消之前的指定的关机计划  cancel取消</span></span><br><span class="line">shutdown -c  </span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="0-2-SSH远程登陆"><a href="#0-2-SSH远程登陆" class="headerlink" title="0.2. SSH远程登陆"></a>0.2. SSH远程登陆</h3><table><thead><tr><th>命令</th><th>对应英文</th><th>作用</th></tr></thead><tbody><tr><td>ssh 用户名@IP</td><td>secure shell</td><td>远程登陆</td></tr><tr><td>scp 用户名@ip:文件名或路径 用户名@ip:文件名或路径</td><td>secure copy</td><td>远程复制文件</td></tr></tbody></table><p><strong>SSH连接</strong></p><p>在Linux中SSH是非<strong>常常用的</strong>工具，通过<strong>SSH客户端</strong>可以连接到运行了<strong>SSH服务器</strong>的远程机器上</p><ul><li><strong>默认端口号22，如果端口号默认，连接的时候可以省略</strong></li></ul><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">数据传输是加密的，可以防止信息泄露</span></span><br><span class="line"><span class="string">数据传输是压缩的，可以提高传输速度</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br></pre></td></tr></table></figure><ul><li>SSH是一种网络协议，用于计算机之间的加密登录，Linux下默认开启sshd服务，只有开启sshd服务才能进行ssh连接</li><li>可以使用 <strong>service sshd status</strong> 查看是否开启sshd服务， active(running)表示已经开启</li><li>没有开启可以 sudo apt-get install openssh-server</li></ul><p> <strong>SSH高级</strong></p><blockquote><p>提示：有关SSH配置信息都保存在用户家目录下的 <code>.ssh</code>目录下</p></blockquote><p><strong>（1）免密码登陆</strong></p><p><strong>步骤</strong>：</p><ul><li>配置公钥<ul><li>执行 <code>ssh-keygen</code>即可生成SSH钥匙，一路回车即可</li></ul></li><li>上传公钥到服务器<ul><li>执行 <code>ssh-copy-id -p port user@remote</code>，可以让远程服务器记住我们的公钥</li></ul></li></ul><blockquote><p>非对称加密算法：</p><ul><li>使用<strong>公钥</strong>加密的数据，需要使用<strong>私钥解</strong>密</li><li>使用<strong>私钥</strong>加密的数据，需要使用<strong>公钥</strong>解密</li></ul></blockquote><p><strong>（2）配置别名</strong></p><p><code>~/.ssh</code>文件夹下创建 <code>config</code>文件</p><p><code>~/.ssh/config</code>里面追加内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mac 就是别名名称</span></span><br><span class="line">Host mac</span><br><span class="line">HostName  ip地址</span><br><span class="line">User zs</span><br><span class="line">Port 22</span><br></pre></td></tr></table></figure><p>保存之后，即可使用 <code>ssh mac</code>实现远程登陆，scp 同样也可以</p><hr><h3 id="0-3-SCP复制文件"><a href="#0-3-SCP复制文件" class="headerlink" title="0.3. SCP复制文件"></a>0.3. SCP复制文件</h3><ul><li><code>scp</code> 就是 <code>secure copy</code> ,是一个在Linux下用来进行<strong>远程拷贝文件</strong>的命令</li><li>它的地址格式与SSH基本相同，需要注意的是，在指定端口时用的是大写的 <code>-P</code> 而不是小写的</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#把本地01.py文件复制到远程家目录的DeskTop/01.py</span></span><br><span class="line">scp -P port 01.py user@remote:DesekTop/01.py</span><br><span class="line"></span><br><span class="line"><span class="comment">#把远程家目录下的DeskTop/01.py 文件，复制本地当前目录下的01.py</span></span><br><span class="line">scp -P port user@remote:DeskTop/01.py 01.py</span><br><span class="line"></span><br><span class="line"><span class="comment">#加上-r 选项可以传送文件夹</span></span><br><span class="line"><span class="comment">#把当前目录下的demo文件夹，复制到远程家目录下的DeskTop</span></span><br><span class="line">scp -r demo user@remote:DeskTop</span><br><span class="line"></span><br><span class="line"><span class="comment">#把远程家目录下的DeskTop 复制到当前家目录下的demo文件夹</span></span><br><span class="line">scp -r user@remote:DeskTop demo</span><br></pre></td></tr></table></figure><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>-r</td><td>若给出的源文件是 目录文件，则scp将递归复制该目录下的所有子目录和文件，目标文件必须为一个目录名</td></tr><tr><td>-P</td><td>若远程SSH服务器 的端口不是22，需要使用大写-P 选项指定端口</td></tr></tbody></table><blockquote><p><strong>注意：</strong></p><ul><li><code>scp</code> 这个终端命令只能在 <code>Linux</code> 或者 <code>UNIX</code>系统下使用</li><li>如果在 <code>Windows</code>系统中，可以安装 <code>PUTTY</code>，使用 <code>pscp</code>命令行工具或者安装 <code>FileZilla</code>使用 <code>FTP</code>进行问加你传输</li></ul><p><strong>FileZilla</strong></p><ul><li><code>FileZilla</code>在传输文件时，使用的是 <code>FTP</code>而不是 <code>SSH</code>服务，因此端口号应设置为 <code>21</code></li></ul></blockquote><hr><h3 id="0-4-Windows安装SSH服务"><a href="#0-4-Windows安装SSH服务" class="headerlink" title="0.4. Windows安装SSH服务"></a>0.4. Windows安装SSH服务</h3><ul><li><strong>打开 PowerShell 命令行(管理员)</strong></li><li><strong>查看是否已经安装</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Get-WindowsCapability -Online | Where-Object Name -like <span class="string">&#x27;OpenSSH*&#x27;</span></span><br></pre></td></tr></table></figure><ul><li><strong>安装OpenSSH客户端</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Add-WindowsCapability -Online -Name OpenSSH.Client~~~~0.0.1.0</span><br></pre></td></tr></table></figure><ul><li><strong>安装 OpenSSH 服务器</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Add-WindowsCapability -Online -Name OpenSSH.Server~~~~0.0.1.0</span><br></pre></td></tr></table></figure><ul><li>win+R，cmd打开命令行，输入net start sshd，<strong>启动SSH</strong></li><li>win+R,   cmd打开命令行，输入net stop sshd <strong>关闭SSH</strong></li></ul><h1 id="7、用户权限相关命令"><a href="#7、用户权限相关命令" class="headerlink" title="7、用户权限相关命令"></a>7、用户权限相关命令</h1><h3 id="0-1-用户和权限"><a href="#0-1-用户和权限" class="headerlink" title="0.1. 用户和权限"></a>0.1. 用户和权限</h3><ul><li>用户是Linux系统工作中重要 的一环，用户管理包括<strong>用户</strong>与<strong>组</strong>管理</li><li>在Linux中，不论是由本机还是远程登录系统，<strong>每个系统都必须有一个账号</strong>，并且对于不同的系统资源拥有不同的使用权限</li><li>在Linux中，可以指<strong>定每一个用户</strong>针对<strong>不同的文件或者目录</strong>的不同权限</li><li>对<strong>文件&#x2F;目录的权限包括：</strong></li></ul><table><thead><tr><th>权限</th><th>英文</th><th>缩写</th><th>数字代号</th></tr></thead><tbody><tr><td>读</td><td>read</td><td>r</td><td>4</td></tr><tr><td>写</td><td>write</td><td>w</td><td>2</td></tr><tr><td>执行</td><td>execute</td><td>e</td><td>1</td></tr></tbody></table><p><strong>用户组</strong>：LInux有一个组的概念，不同的用户分到一个组，那么同组下的用户可以用这个组的权限</p><hr><p>⽤⼾学习必会的两个⽂件<br><code>/etc/passwd</code> 记录了⽤⼾的账⼾信息</p><p><img src="/.com//../imgs/a4062c71f6ab42069fa1a9c9f8b80f87.png" alt="在这里插入图片描述"></p><blockquote><p>zs:x:1000:1000:zs:&#x2F;home&#x2F;zs:&#x2F;bin&#x2F;bash<br>第⼀段:⽤⼾名<br>超级管理员:root⽤⼾ uid 0<br>普通⽤⼾:⾃⼰创建的⽤⼾，可以登录操作系统<br>程序⽤⼾:给予程序执⾏的时候⼀个⾝份，id号⼀般情况下1-999<br>第⼆段:密码占位符<br>第三段:⽤⼾的uid<br>第四段:⽤⼾的gid<br>第五段:⽤⼾的描述信息<br>第六段:⽤⼾的家⽬录<br>第七段:⽤⼾登录的解释器</p></blockquote><p>另外一份文件<code>vim /etc/shadow</code> 存放了用户加密后的密码<br><img src="/.com//../imgs/35df217ae86743928843a2c9ed90abd0.png" alt="在这里插入图片描述"></p><blockquote><p>第⼀段:⽤⼾名<br>第⼆段:加密后的密码<br>第三段:最近⼀次密码修改⽇期距离1970年到现在的天数，unix诞⽣<br>第四段:密码的最短有效期，3，⽤⼾三天内不能修改密码<br>第五段:密码的最⻓有效期，⼀般都是90天<br>第六段:密码过期7天前提醒<br>第七段:密码的不活跃期<br>第⼋段:账⼾的失效⽇期举例1970年1⽉1⽇的天数</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">man crypt</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/87240416763e4cee96e2693baed05c50.png" alt="在这里插入图片描述"></p><p><strong>&#x3D;&#x3D;root用户不受文件权限限制&#x3D;&#x3D;</strong></p><p><img src="/.com//../imgs/0a72ab438225468184328a0e4130d095.png" alt="在这里插入图片描述"></p><p>文件权限解释：</p><blockquote><p>第一段： </p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">l:链接</span><br><span class="line">d:目录</span><br><span class="line">c:字符型设备</span><br><span class="line">b:块设备</span><br></pre></td></tr></table></figure><p>第⼆段：⽂件的所属者权限<br>第三段：⽂件的所属组权限<br>第四段：其它⽤⼾的权限<br>第五段：<code>.</code>代表selinux的标签</p></blockquote><blockquote><p>要求设定saury密码的最⻓有效期时间为90天，设定saury账⼾登录系统的时候必须修<br>改⾃⼰的密码，设定saury账⼾失效时间为2023 10 1⽇</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chage -M 90 saury 密码最⻓有效期</span><br><span class="line">chage -d 0 saury ⽤⼾登录必须修改密码</span><br><span class="line">chage -E 2023-10-1 saury 账⼾失效时间</span><br></pre></td></tr></table></figure></blockquote><h3 id="0-2-超级用户"><a href="#0-2-超级用户" class="headerlink" title="0.2. 超级用户"></a>0.2. 超级用户</h3><ul><li>Linux系统中 <code>root</code> 账户通常<strong>用于系统维护和管理，<strong>对操作系统所有</strong>资源具有所有访问权限</strong></li><li>在大多数Linux版本中，都<strong>不推荐直接使用root 账户登陆系统</strong></li><li>在Linux安装过程中，系统会自动创建一个用户账号，而这个默认的用户就成为标准账户</li></ul><p><strong>sudo:</strong></p><ul><li><code>su</code>  表<strong>示另一个用户的身份</strong></li><li><code>sudo</code> 命令用来以其他身份来执行命令，预设的身份为 <code>root</code></li><li>用户 <code>sudo</code> 时，必须输入密码，之后有<strong>五分钟的有效期限</strong>，超过期限必须重新输入密码</li></ul><hr><h3 id="0-3-组管理命令"><a href="#0-3-组管理命令" class="headerlink" title="0.3. 组管理命令"></a>0.3. 组管理命令</h3><blockquote><p><strong>提示</strong>：<strong>创建组&#x2F;删除组</strong> 的命令都需要通过 <code>sudo </code>执行</p></blockquote><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>groupadd 组名</td><td>添加组</td></tr><tr><td>groupdel 组名</td><td>删除组</td></tr><tr><td>cat  &#x2F;etc&#x2F;group</td><td>确认组信息</td></tr><tr><td>chgrp -R 组名 文件&#x2F;目录名</td><td>递归修改文件&#x2F;目录的所属组</td></tr></tbody></table><p><strong>小提示：</strong></p><ul><li>组信息都保存在 <code>/etc/group</code>中</li><li><code>/etc</code>目录是专门用来保存<strong>系统配置信息</strong>的目录</li></ul><h3 id="0-4-用户管理"><a href="#0-4-用户管理" class="headerlink" title="0.4. 用户管理"></a>0.4. 用户管理</h3><blockquote><p>用户管理包括：创建用户，删除用户，修改用户帐号属性，创建用户组，修改用户组属性<br><strong>创建用户&#x2F;删除用户&#x2F;修改其他用户密码的终端命令斗需要 <code>sudo</code>执行.</strong></p></blockquote><h4 id="0-4-1-创建用户-设置密码-删除用户"><a href="#0-4-1-创建用户-设置密码-删除用户" class="headerlink" title="0.4.1. 创建用户&#x2F;设置密码&#x2F;删除用户"></a>0.4.1. 创建用户&#x2F;设置密码&#x2F;删除用户</h4><table><thead><tr><th>命令</th><th>作用</th><th>说明</th></tr></thead><tbody><tr><td>useradd -m -g 组名 新建用户</td><td>添加新用户</td><td>-m自动创建用户家目录&#x3c;br &#x2F;&gt;-g 指定用户所在的组，否则会建立一个和同名的组</td></tr><tr><td>passwd 用户名</td><td>设置用户密码</td><td>如果是普通用户 直接使用passwd修改密码</td></tr><tr><td>userdel -r 用户名</td><td>删除用户</td><td>-r 自动删除用户家目录</td></tr><tr><td>cat &#x2F;etc&#x2F;passwd</td><td>确认用户信息</td><td>新建用户后，用户信息会保存在&#x2F;etc&#x2F;passwd文件中</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 添加用户的一些选项</span></span><br><span class="line">* 命令 ；useradd 「用户名」</span><br><span class="line">* 选项说明：</span><br><span class="line">  * -d指定新账户的主目录</span><br><span class="line">  * -g 指定用户的所属组</span><br><span class="line">  * -G指定用户附加组</span><br><span class="line">  * -s指定用户登录shell</span><br><span class="line">  * -m自动创建家目录</span><br><span class="line">  * -u 用户ID</span><br><span class="line">  * -o 强制</span><br></pre></td></tr></table></figure><blockquote><p>为⽤⼾设定密码以及查看密码状态</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">passwd -S saury #查看⽤⼾状态</span><br><span class="line">useradd -u 0 -o -d /bin xjh &amp;&gt;/dev/null #创建与root同权账⼾</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-o强制uid为0，-d指定家⽬录，&amp;&gt;/dev/null不管正确的输出还是错误的输出，全部不显⽰</span></span><br><span class="line">echo 456|passwd --stdin saury #⾮交互设置密码</span><br></pre></td></tr></table></figure></blockquote><h4 id="0-4-2-查看用户信息"><a href="#0-4-2-查看用户信息" class="headerlink" title="0.4.2. 查看用户信息"></a>0.4.2. 查看用户信息</h4><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>id 用户名</td><td>查看用户UID和GID信息</td></tr><tr><td>who</td><td>查看当前所有登陆的用户列表</td></tr><tr><td>whoami</td><td>查看当前登陆用户的账户名</td></tr></tbody></table><h4 id="0-4-3-usermod"><a href="#0-4-3-usermod" class="headerlink" title="0.4.3. usermod"></a>0.4.3. usermod</h4><ul><li>usermod 用来设置<strong>用户</strong>的<strong>主组 &#x2F;附加组</strong>，和<strong>登陆shell</strong></li><li><strong>主组</strong>：通常在新建用户时指定，在 <code>/etc/passwd</code>的第四列<strong>GID对应的组</strong></li><li><strong>附加组</strong>：在 <code>etc/group</code>中最后一列表示该组的用户列表，用于指定<strong>用户的附加权限</strong></li></ul><blockquote><p>提示：设置了用户的附加组后，需要重新登陆才能生效</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改用户的主组</span></span><br><span class="line">usermod -g 组 用户名</span><br><span class="line"><span class="comment">#修改用户的附加组</span></span><br><span class="line">usermod -G 组 用户组</span><br><span class="line"></span><br><span class="line"><span class="comment">#修改用户登陆shell</span></span><br><span class="line">usermod -s /bin/bash 用户名</span><br></pre></td></tr></table></figure><blockquote><p>注意：默认使用 <code>useradd</code>添加用户是没有权限使用 <code>sudo</code> 以 <code>root</code>身份执行命令，可以使用下面的指令，将用户添加到 <code>sudo</code> 附加组中</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -G <span class="built_in">sudo</span> 用户名</span><br></pre></td></tr></table></figure><p><strong>修改帐号属性</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">* 命令：usermod</span><br><span class="line">  * -u 用户<span class="built_in">id</span></span><br><span class="line">  * -g 所属组<span class="built_in">id</span></span><br><span class="line">  * -a -G GID：不适用-a选项，会覆盖此前的附加组</span><br><span class="line">  * -d -m将家目录内容移动至新位置</span><br><span class="line">  * -l新的登录名称</span><br><span class="line">  * -s该用户帐号的新登录</span><br></pre></td></tr></table></figure><h4 id="0-4-4-切换用户"><a href="#0-4-4-切换用户" class="headerlink" title="0.4.4. 切换用户"></a>0.4.4. 切换用户</h4><ul><li>su  -  用户名<ul><li>加  - 同时切换到用户的家目录，不加直接在当前目录切换到新用户</li></ul></li><li>exit 退出当前登陆的账户</li></ul><h3 id="0-5-修改文件权限"><a href="#0-5-修改文件权限" class="headerlink" title="0.5. 修改文件权限"></a>0.5. 修改文件权限</h3><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>chown</td><td>修改拥有者</td></tr><tr><td>chgrp</td><td>修改组</td></tr><tr><td>chmod</td><td>修改权限</td></tr></tbody></table><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#修改文件|目录的拥有者</span></span><br><span class="line"><span class="built_in">chown</span> 用户名  文件名|目录名</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#递归修改文件|目录的组</span></span><br><span class="line"><span class="built_in">chgrp</span> -R 组名  文件名 | 目录名</span><br><span class="line"></span><br><span class="line"><span class="comment">#递归修改文件的权限</span></span><br><span class="line"><span class="built_in">chmod</span> -R 755 文件名|目录名</span><br></pre></td></tr></table></figure><ul><li><p><code>chmod</code>可以修改<strong>用户&#x2F;组</strong>&#x2F;对<strong>文件&#x2F;目录</strong>的权限</p></li><li><p>命令格式：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># +增加权限 -取消权限</span></span><br><span class="line"><span class="built_in">chmod</span> +/- rwx 文件名|目录名</span><br></pre></td></tr></table></figure></li><li><p>每个文件，都有三组不同的权限，第一组文件所有者，第二组文件所属组 ，第三组是其他用户</p><ul><li><ol><li><strong>u</strong> 文件所有者修改所有者权限，<code>chmod u+/-/=rwx filename</code></li></ol></li><li><ol start="2"><li><strong>g</strong> 文件所有组 修改所属组权限： <code>chmod g+/-/=rwx filename</code></li></ol></li><li><ol start="3"><li><strong>o</strong> 其他用户 修改所属组权限：<code> chmod o+/-/=rwx filename</code></li></ol></li></ul></li><li><p>命令：<code>chmod 755 文件名| 目录名</code> 指定权限修改</p></li><li><p><code>chmod</code>中第一个数字是代表所有者权限，第二个数字代表所属组权限，第三个数字代表其他人权限</p></li><li><p><strong>&#x3D;&#x3D;八位赋权法&#x3D;&#x3D;</strong></p></li></ul><p><img src="/.com//../imgs/278f550ec7124ffb86f87d3e7412bba0.png" alt="在这里插入图片描述"></p><table><thead><tr><th align="center">权限</th><th align="center">八位赋权法表示</th></tr></thead><tbody><tr><td align="center">r</td><td align="center">4</td></tr><tr><td align="center">w</td><td align="center">2</td></tr><tr><td align="center">e</td><td align="center">1</td></tr></tbody></table><p><img src="/.com//../imgs/2d8a41c8b9ba46f993294fee21da035f.png" alt="在这里插入图片描述"><img src="/.com//../imgs/45fe22f6489148cd8b69245bc9fb8807.png" alt="在这里插入图片描述"><img src="/.com//../imgs/64817aac76304fc0a8719f89779c9ec0.png" alt="在这里插入图片描述"><img src="/.com//../imgs/db41781039fb4c5a8f80bcd29df5bce6.png" alt="在这里插入图片描述"><br><img src="/.com//../imgs/718b0071fcad4d86a0b5022b922be114.png" alt="在这里插入图片描述"><br><img src="/.com//../imgs/aad5b44b3bba41c0935bd28cb09b72dc.png" alt="在这里插入图片描述"></p><h3 id="0-6-特殊-权限"><a href="#0-6-特殊-权限" class="headerlink" title="0.6. 特殊 权限"></a>0.6. 特殊 权限</h3><h4 id="0-6-1-粘滞位"><a href="#0-6-1-粘滞位" class="headerlink" title="0.6.1. 粘滞位"></a>0.6.1. 粘滞位</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">只对⽬录⽣效，</span><br><span class="line">只有⽂件的所属者才可以删除⽂件</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/4918bd49567845db84c6426aaccc8413.png" alt="在这里插入图片描述"></p><h4 id="0-6-2-suid"><a href="#0-6-2-suid" class="headerlink" title="0.6.2. suid"></a>0.6.2. suid</h4><p>只对可执⾏⽂件⽣效</p><p>任何⽤⼾执⾏该⽂件都是以⽂件所属者⾝份运⾏的</p><p><img src="/.com//../imgs/964846a604ed4ba38eda0a359707eeb3.png" alt="在这里插入图片描述"><br><img src="/.com//../imgs/4c98c25379c640c3aecac35892beab9c.png" alt="在这里插入图片描述"></p><hr><h1 id="8、系统信息相关命令"><a href="#8、系统信息相关命令" class="headerlink" title="8、系统信息相关命令"></a>8、系统信息相关命令</h1><h3 id="0-1-时间和日期"><a href="#0-1-时间和日期" class="headerlink" title="0.1. 时间和日期"></a>0.1. 时间和日期</h3><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>cal</td><td>(calendar）查看日历， -y选项可查看一年的日历</td></tr><tr><td>date</td><td>查看系统当前时间</td></tr></tbody></table><p>例如：</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%Y-%m-%d %H:%M&quot;</span><span class="comment"># Y：年 m：月 d：日 H：时 M：分 S：秒</span></span><br><span class="line"><span class="built_in">date</span> <span class="string">&quot;+%j&quot;</span><span class="comment"># 显示今天是当年的第几天</span></span><br></pre></td></tr></table></figure><h3 id="0-2-查看磁盘的空间"><a href="#0-2-查看磁盘的空间" class="headerlink" title="0.2. 查看磁盘的空间"></a>0.2. 查看磁盘的空间</h3><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>df -h</td><td>disk free 显示磁盘剩余空间</td></tr><tr><td>du -h 目录名</td><td>disk usage 显示目录下的文件大小</td></tr></tbody></table><ul><li>df -TH 查看磁盘分区，以及挂载情况</li><li>du -sh [目录名] 查看目录大小</li><li>du -h [文件名] 查看文件大小</li></ul><p><strong>选项说明：</strong></p><table><thead><tr><th>参数</th><th>含义</th></tr></thead><tbody><tr><td>-h</td><td>以人性化的方式显示文件大小</td></tr></tbody></table><h3 id="0-3-查看内核-操作系统-CPU信息"><a href="#0-3-查看内核-操作系统-CPU信息" class="headerlink" title="0.3. 查看内核&#x2F;操作系统&#x2F;CPU信息"></a>0.3. 查看内核&#x2F;操作系统&#x2F;CPU信息</h3><ul><li>uname -a 查看内核&#x2F;操作系统&#x2F;CPU信息</li><li>uname -i 查看硬件平台</li><li>uname -m查看CPU</li><li>uname -n节点名称</li><li>uname -o操作系统</li><li>uname -v 内核版本</li><li>uname -r 发行版本号</li></ul><h3 id="0-4-进程管理"><a href="#0-4-进程管理" class="headerlink" title="0.4. 进程管理"></a>0.4. 进程管理</h3><ul><li>所谓<strong>进程</strong>，就是当前<strong>正在执行的一个程序</strong></li></ul><table><thead><tr><th>命令</th><th>作用</th></tr></thead><tbody><tr><td>ps aux</td><td>process status 查看进程的详细状况</td></tr><tr><td>top</td><td>动态显示运行中的进程并且排序</td></tr><tr><td>kill -9 进程代号</td><td>终止指定代号的进程 -9表示强行终止</td></tr><tr><td>pidof</td><td>返回相应的进程ID</td></tr></tbody></table><h4 id="0-4-1-ps"><a href="#0-4-1-ps" class="headerlink" title="0.4.1. ps"></a>0.4.1. ps</h4><blockquote><p><code>ps</code>默认只会显示当前用户通过终端启动的应用程序</p></blockquote><ul><li><code>ps</code> 选项说明：</li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>a</td><td>显示终端上的所有进程，包含其他用户的进程</td></tr><tr><td>u</td><td>显示进程的详细状态</td></tr><tr><td>x</td><td>显示没有控制终端的进程</td></tr></tbody></table><p><img src="/.com//../imgs/f5b18bf30f8449dab1d39288bc220607.png" alt="在这里插入图片描述"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 说明</span></span><br><span class="line"></span><br><span class="line">- USER：进程所有者</span><br><span class="line"></span><br><span class="line">- PID：进程ID号</span><br><span class="line"></span><br><span class="line">- %CPU：运算器占用率</span><br><span class="line"></span><br><span class="line">- %MEM：内存占用率</span><br><span class="line"></span><br><span class="line">- VSZ：虚拟内存占用率</span><br><span class="line"></span><br><span class="line">- RSS：占用的固定内存量</span><br><span class="line"></span><br><span class="line">- TTV：所在的终端</span><br><span class="line"></span><br><span class="line">- STAT：进程状态</span><br><span class="line">  - R：进程正在运行或在运行队列中等待执行。</span><br><span class="line">  - S：中断状态（进程处于休眠中，当某个条件形成后会脱离该状态）</span><br><span class="line">  - D：不可中断状态（进程处于不可中断睡眠状态，通常在等待某些 I/O 操作（如磁盘 I/O）完成时出现。）</span><br><span class="line">  - Z：僵死状态（进程已经中止，但是进程的描述符还存在，直到父进程退出后才释放）</span><br><span class="line">  - T：停止状态（进程被暂停执行，通常是收到停止信号（如 `SIGSTOP`）或调试信号（如 `SIGTSTP`）导致的。）</span><br><span class="line">  - &lt;：高优先级进程</span><br><span class="line">  - N：低优先级进程</span><br><span class="line">  - L：被锁进内存</span><br><span class="line">  - s：包含子进程</span><br><span class="line">  - I：多线程进程</span><br><span class="line">  - +：位于前台的进程组</span><br><span class="line"></span><br><span class="line">- START：进程的开始时间</span><br><span class="line"></span><br><span class="line">- TIME：进程已经使用的CPU时间</span><br><span class="line"></span><br><span class="line">- COMMAND：进程的命令名称和参数</span><br></pre></td></tr></table></figure><h4 id="0-4-2-top"><a href="#0-4-2-top" class="headerlink" title="0.4.2. top"></a>0.4.2. top</h4><ul><li><code>top </code>查看进程实时运行情况，即系统资源实时使用情况</li><li>退出 <code>top</code>界面输入 <code>q</code></li></ul><p><img src="/.com//../imgs/80ecb7d4e2324527b71aac7b797f46c8.png" alt="在这里插入图片描述"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">**说明**：</span><br><span class="line"></span><br><span class="line">- top：系统时间</span><br><span class="line"></span><br><span class="line">- up：运行时间</span><br><span class="line"></span><br><span class="line">- 3 user：登录的终端数</span><br><span class="line"></span><br><span class="line">- load average：系统的负载，&lt;u&gt;0.00表示一分钟内的负载，0.06表示5分钟内的负载，0.07表示15分钟内的负载&lt;/u&gt;。这个值越高系统的负载就大，这个值越低表示系统处于空闲中。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="0-4-3-kill"><a href="#0-4-3-kill" class="headerlink" title="0.4.3. kill"></a>0.4.3. kill</h4><ul><li>使用 <code>kill </code>命令时，最好只终结当前用户开启的进程，不要终止 <code>root</code>身份开启的进程，否则导致系统崩溃</li></ul><h4 id="0-4-4-pidof"><a href="#0-4-4-pidof" class="headerlink" title="0.4.4. pidof"></a>0.4.4. pidof</h4><p>用于查找指定名称进程的进程ID<br><img src="/.com//../imgs/ade5a79ee4204949941ca78d5130a203.png" alt="在这里插入图片描述"></p><h1 id="9、-其他命令"><a href="#9、-其他命令" class="headerlink" title="9、 其他命令"></a>9、 其他命令</h1><h3 id="0-1-wget-终端下载网络文件"><a href="#0-1-wget-终端下载网络文件" class="headerlink" title="0.1. wget 终端下载网络文件"></a>0.1. wget 终端下载网络文件</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">wget</span><br><span class="line">-b<span class="comment"># 后台下载模式</span></span><br><span class="line">-P<span class="comment"># 下载到指定目录</span></span><br><span class="line">-t<span class="comment"># 最大尝试次数</span></span><br><span class="line">-c<span class="comment"># 断点续传</span></span><br><span class="line">-p<span class="comment"># 下载页面里面的所有资源</span></span><br><span class="line">-r<span class="comment"># 递归下载</span></span><br><span class="line">-</span><br></pre></td></tr></table></figure><p>例如</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -p http://www.xxx.xx/<span class="comment"># 后面加上下载网页路径</span></span><br></pre></td></tr></table></figure><h3 id="0-2-history-查看历史命令"><a href="#0-2-history-查看历史命令" class="headerlink" title="0.2. history 查看历史命令"></a>0.2. history 查看历史命令</h3><table><thead><tr><th>命令</th><th>描述</th></tr></thead><tbody><tr><td>history</td><td>查看历史命令</td></tr><tr><td>history -c</td><td>删除历史命令记录</td></tr></tbody></table><h3 id="0-3-打包压缩"><a href="#0-3-打包压缩" class="headerlink" title="0.3. 打包压缩"></a>0.3. 打包压缩</h3><ul><li>在不同操作系统中，常用的打包压缩方式是不同的<ul><li><code>windows</code>下常用 <code>rar</code></li><li><code>Mac</code>下常用 <code>zip</code></li><li><code>Linux</code>下常用 <code>tar.gz</code></li></ul></li></ul><h4 id="0-3-1-1、打包-解包"><a href="#0-3-1-1、打包-解包" class="headerlink" title="0.3.1. 1、打包&#x2F;解包"></a>0.3.1. 1、打包&#x2F;解包</h4><p><strong>dd命令</strong></p><p>读取硬盘字节内容，主要完成磁盘对拷。生成一个100M 大小的文件</p><p><code>/dev/zero</code>是一个抽象的设备文件，实际并不存在，他有无数个0组成</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dd if=/dev/zero of=/root/Desktop/bigfile bs=1M count 100</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">利用<span class="built_in">dd</span>命令生成一个文件，是/dev/zero 文件名设置为bigfile 单个文件的大小为1M，一共100个</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/2e9e870b6519415081f96ca9a4be6a9e.png" alt="在这里插入图片描述"><img src="/.com//../imgs/ec0397c753534722bb9df58f876f0890.png" alt="在这里插入图片描述"></p><ul><li><code>tar</code>是可以把无法被压缩的目录转换成特殊的包文件格式，包文件可以被压缩</li><li>tar 选项说明：</li></ul><table><thead><tr><th>选项</th><th>含义</th></tr></thead><tbody><tr><td>c</td><td>生成档案文件，创建打包文件</td></tr><tr><td>x</td><td>解开档案文件</td></tr><tr><td>v</td><td>列出归档解档的详细过程，显示进度</td></tr><tr><td>f</td><td>指定档案文件名称，f后面一定是.tar文件，所以必须放选项最后</td></tr></tbody></table><blockquote><p>注意：<code>f</code>选项必须放在最后，其他选项顺序可以随意</p></blockquote><ul><li>tar命令格式</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打包文件</span></span><br><span class="line">tar -cvf 打包文件.tar  被打包的文件/路径</span><br><span class="line"><span class="comment">#解包</span></span><br><span class="line">tar -xvf 打包文件.tar</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打包 </span></span><br><span class="line">[root@zs Desktop]# tar -cvf demo.tar ./demo/</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/542be52328194211b017e5ba133ec435.png" alt="在这里插入图片描述"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">解包</span></span><br><span class="line">tar -xvf python.tar</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/1f1f757fa51a4674bf8a3142b592a99e.png" alt="在这里插入图片描述"></p><h4 id="0-3-2-2、压缩和解压缩"><a href="#0-3-2-2、压缩和解压缩" class="headerlink" title="0.3.2. 2、压缩和解压缩"></a>0.3.2. 2、压缩和解压缩</h4><p><strong>（1）gzip命令</strong></p><p><code>gzip</code>一般跟 <code>tar</code>一起使用，完成<strong>打包压缩</strong><br>&#x3D;&#x3D;tar只负责打包并没有做压缩&#x3D;&#x3D;，使用 <strong>-z</strong> 选项可以调用gzip压缩，完成打包压缩<br>使用tar打包压缩的文件名，一般命名<strong>为xxx.tay.gz</strong>区别与其他文件</p><p><strong>压缩文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@zs Desktop]# tar -zcvf demo.tar.gz demo/</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/84f8804f953f4e4d835788fc6f0904ad.png" alt="在这里插入图片描述"></p><p><strong>解压缩文件</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压缩文件</span></span><br><span class="line">[root@zs Desktop]# tar -zxvf demo.tar.gz</span><br><span class="line"><span class="comment">#解压缩到指定路径</span></span><br><span class="line">[root@zs Desktop]# tar -zxvf demo.tar.gz -C 目标路径</span><br></pre></td></tr></table></figure><blockquote><p><code>-C</code>指解压到哪里，解压的目录必须存在</p></blockquote><p><img src="/.com//../imgs/32fc86bb9f4c484295288b3656e8c5e7.png" alt="在这里插入图片描述"></p><p><strong>（2）bzip2命令</strong></p><p>bzip2使用方式跟gzip差不多，也是由tar去调用，使用 **<code>-j</code> ** 选项<br>bzip2压缩的文件命名采用 xxx.tar.bz2</p><p><strong>压缩文件</strong>：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -jcvf py.tar.bz2 a.txt b.txt</span><br></pre></td></tr></table></figure><p><strong>解压缩文件：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解压缩</span></span><br><span class="line">tar -jxvf py.tar.ba2</span><br><span class="line"><span class="comment">#解压缩到指定路径</span></span><br><span class="line">tar -jxvf py.tar.ba2 -C 目标目录</span><br></pre></td></tr></table></figure><h3 id="0-4-软链接"><a href="#0-4-软链接" class="headerlink" title="0.4. 软链接"></a>0.4. 软链接</h3><table><thead><tr><th>使用</th><th>说明</th></tr></thead><tbody><tr><td>ln -s 被链接的源文件       链接文件</td><td>建立文件的软链接，用通俗的话将<strong>类似于Windows下的快捷方式</strong></td></tr></tbody></table><ul><li><strong>注意：</strong></li><li>1.没有 <code>-s </code>选项建立的是一个<strong>硬链接文件</strong><ul><li>两个文件占用相同大小的硬盘空间，<strong>工作中几乎不会建立文件的硬链接</strong></li></ul></li><li>2.<strong>源文件要使用绝对路径</strong>，不能使用相对路径，这样可以方便移动链接文件后，仍然能够正常使用</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#绝对路径</span></span><br><span class="line"><span class="built_in">ln</span> -s /home/python/Desktop/demo/b/c/01.py  01_juedui</span><br></pre></td></tr></table></figure><h1 id="10、软件管理"><a href="#10、软件管理" class="headerlink" title="10、软件管理"></a>10、软件管理</h1><h3 id="0-1-ubuntu软件管理"><a href="#0-1-ubuntu软件管理" class="headerlink" title="0.1. ubuntu软件管理"></a>0.1. ubuntu软件管理</h3><ul><li>apt （Advanced Packaging Tool）,是Linux下的一款安装包管理工具</li><li>可以在终端方便<strong>安装、卸载，更新软件包</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#安装软件</span></span><br><span class="line"><span class="built_in">sudo</span> apt install 软件包</span><br><span class="line"><span class="comment">#卸载软件</span></span><br><span class="line"><span class="built_in">sudo</span> apt remove 软件名</span><br><span class="line"><span class="comment">#更新软件</span></span><br><span class="line"><span class="built_in">sudo</span> apt upgrade </span><br></pre></td></tr></table></figure><p><strong>案例演示：</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ssh</span><br><span class="line"><span class="built_in">sudo</span> apt upgrade ssh</span><br><span class="line">suod apt remove ssh</span><br><span class="line"></span><br><span class="line"><span class="comment">#一个小火车提示</span></span><br><span class="line"><span class="built_in">sudo</span> apt install sl</span><br><span class="line"></span><br><span class="line"><span class="comment">#一个比较漂亮的查看当前进程排名的软件</span></span><br><span class="line"><span class="built_in">sudo</span> apt install htop</span><br></pre></td></tr></table></figure><h3 id="0-2-Centos7软件安装"><a href="#0-2-Centos7软件安装" class="headerlink" title="0.2. Centos7软件安装"></a>0.2. Centos7软件安装</h3><h4 id="0-2-1-源码安装"><a href="#0-2-1-源码安装" class="headerlink" title="0.2.1. 源码安装"></a>0.2.1. 源码安装</h4><p>源码包：C语言写的，可以在linux的不同版本上安装</p><p>以安装apache服务为例</p><p><img src="/.com//../imgs/b37d47ffa9a44ce2bf1da60030e1b381.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/c505f9f1d0ce472da5953086156d0b0f.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/16c22100570d4a7d8b9807f9e5b89727.png" alt="在这里插入图片描述"></p><p>安装源码包程序，⼀定在软件解压⽬录下操作</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure #⽣成makefile⽂件，makefile⽂件决定编译的顺序</span><br><span class="line">make #编译</span><br><span class="line">make install #将编译好的程序复制粘贴到--prefix选项指定的⽬录⾥，默认是/usr/local/apache2</span><br></pre></td></tr></table></figure><p>启动apache服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/apche2/bin/apachectl start</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/4b64d0f0f1bc432da25e28bd748ee1a2.png" alt="在这里插入图片描述"></p><p>切换到安装目录下<code>/usr/local/apache2</code></p><p><img src="/.com//../imgs/b1069bf0acc54e858e38c5748b7ecaab.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/ff0e6d4d16f24f0c985f093824331a54.png" alt="在这里插入图片描述"></p><p>⽹站根⽬录，放在该⽬录下的⽂件，会被访问者看⻅</p><h4 id="0-2-2-rpm安装"><a href="#0-2-2-rpm安装" class="headerlink" title="0.2.2. rpm安装"></a>0.2.2. rpm安装</h4><p>Centos7的系统自动的rpm软件包的路径在<code>/run/media/root/CentOS 7 x86_64/Packages</code><br><img src="/.com//../imgs/9ca1ddf518b34e23b0ddadda148849aa.png" alt="在这里插入图片描述"></p><p><strong>查看操作系统安装了那些程序<code>rpm -qa</code></strong></p><p><img src="/.com//../imgs/4303fccab3de4c269e76e0243ff84639.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/cdb695f3f72848828fd06f3c06e06097.png" alt="在这里插入图片描述"></p><p>以 <code>FluffyMcAwesome-A-6.4.0-11.r19335.x86_64.rpm</code> 这个软件包为例</p><p>查看安装包的信息 <code>rpm -qpi</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">--scripts 是查看软件安装前封装的命令，和删除前封装的命令</span></span><br><span class="line">rpm -qpi --scripts FluffyMcAwesome-A-6.4.0-11.r19335.x86_64.rpm</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/960d75193a9843e4b499d99907c19761.png" alt="在这里插入图片描述"></p><p><strong>查看软件安装后命令字的位置</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -qpl  rmp软件包包</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/801538edfd7a4641a4afed5f55746357.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/2be440c38a2f4a67a599496385e9e529.png" alt="在这里插入图片描述"></p><p><strong>安装软件包       -i安装 -v 显示安装信息 -h井号替代进度条</strong><br><img src="/.com//../imgs/d8fa38c816404c2b98d8ab5c51ae37e4.png" alt="在这里插入图片描述"></p><p><strong>卸载</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rpm -e lftp</span><br></pre></td></tr></table></figure><h4 id="0-2-3-yum本地源"><a href="#0-2-3-yum本地源" class="headerlink" title="0.2.3. yum本地源"></a>0.2.3. yum本地源</h4><p>编辑本地yum源安装<code>liboffice</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  /etc/yum.repos.d/</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/c4d6e5f9cee14dee852488ac02733bb5.png" alt="在这里插入图片描述"></p><p>设置本地源之前需要开启一个服务</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart autofs  #系统重启以后，服务会自动关闭</span><br><span class="line">systemctl enable autofs  #开机自启动</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/53d8f87087394f4aa94441b5acd8e327.png" alt="在这里插入图片描述"><img src="/.com//../imgs/d1a9c8f1ad04479a8548739a4856b2ef.png" alt="在这里插入图片描述"><br><img src="/.com//../imgs/9b4b7cd190e442e1bf6b5a8f9b7b5395.png" alt="在这里插入图片描述"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd  /etc/yum.repos.d/</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/684f56d404954522ac68e94da4a2df20.png" alt="在这里插入图片描述"><strong>开始配置本地源</strong><br><img src="/.com//../imgs/4a0fdd6e49954852bada8ee16514db46.png" alt="在这里插入图片描述"><img src="/.com//../imgs/e8f3abd2f1814de299e1b8680c746e05.png" alt="在这里插入图片描述"><img src="/.com//../imgs/2fcd4aa288e94f71b3eef7cbcba1e8eb.png" alt="在这里插入图片描述"><br><img src="/.com//../imgs/bb0f280acb344a0e9019d0d0343cf696.png" alt="在这里插入图片描述"></p><p><img src="/.com//../imgs/9edec838f3f04c70a8809947b69474df.png" alt="在这里插入图片描述"></p><h4 id="0-2-4-yum网络源"><a href="#0-2-4-yum网络源" class="headerlink" title="0.2.4. yum网络源"></a>0.2.4. yum网络源</h4><p>下载配置网络源安装httpd服务</p><p>把刚创建的本地源移动back目录里</p><p><img src="/.com//../imgs/45e150de797a472e8d813953715125f3.png" alt="在这里插入图片描述"></p><p>先配置网络源</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo  http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">-O 指定下载路径</span></span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/41af48bfdd424a5496c4b5e87ec54c72.png" alt="在这里插入图片描述"><img src="/.com//../imgs/9339606a369c465b9e0b52d0f094ecf4.png" alt="在这里插入图片描述"></p><p>开始下载安装</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y httpd</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/b55ae73f31c0406aa0e4cf7fdce6cd78.png" alt="在这里插入图片描述"></p><h1 id="11、vim编辑器"><a href="#11、vim编辑器" class="headerlink" title="11、vim编辑器"></a>11、vim编辑器</h1><p><strong>vim三种模式：</strong></p><ul><li>命令模式         控制光标移动，可对文本进行复制、粘贴、删除和查找等工作。</li><li>插入模式         写入数据</li><li>末行模式        保存或退出文档，以及设置编辑环境</li></ul><p>使用vim打开文件的时候，先进到命令模式。</p><p>此模式下，可使用方向键（上、下、左、右键）或 k、j、h、i 移动光标的位置</p><h4 id="0-1-1-命令模式切换到输入模式"><a href="#0-1-1-命令模式切换到输入模式" class="headerlink" title="0.1.1. 命令模式切换到输入模式"></a>0.1.1. 命令模式切换到输入模式</h4><pre><code>a 在光标的后一位切换到输入模式o 表示在光标的下一行开头切换到输入模式。i 在光标的位置切换到输入模式</code></pre><h4 id="0-1-2-输入模式切换到命令模式"><a href="#0-1-2-输入模式切换到命令模式" class="headerlink" title="0.1.2. 输入模式切换到命令模式"></a>0.1.2. 输入模式切换到命令模式</h4><p>按<code>ESC</code>键，就可以切换到命令模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">gg       <span class="comment">#跳到第一行</span></span><br><span class="line">G        <span class="comment">#跳到最后一行</span></span><br><span class="line"></span><br><span class="line">数字G     <span class="comment">#光标移动到指定行</span></span><br><span class="line">数字 方向键右键     <span class="comment">#表示向右移动多少字符</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span>       <span class="comment">#删除光标所在的整行</span></span><br><span class="line">5dd      <span class="comment">#删除从光标处开始的5行</span></span><br><span class="line">15x      <span class="comment">#删除当前行的15个字符</span></span><br><span class="line">yy       <span class="comment">#复制光标所在的整行</span></span><br><span class="line">5yy      <span class="comment">#复制从光标处开始的5行</span></span><br><span class="line"></span><br><span class="line">u        <span class="comment">#撤销</span></span><br><span class="line">p        <span class="comment">#粘贴</span></span><br><span class="line">ctrl+r   <span class="comment">#恢复，（反撤销）</span></span><br></pre></td></tr></table></figure><h4 id="0-1-3-命令模式切换到末行模式"><a href="#0-1-3-命令模式切换到末行模式" class="headerlink" title="0.1.3. 命令模式切换到末行模式"></a>0.1.3. 命令模式切换到末行模式</h4><p>输入<code>:</code>，切换到末行模式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">:wq            <span class="comment">#保存退出</span></span><br><span class="line">:q!            <span class="comment">#强制退出</span></span><br><span class="line">:w  demo.txt  /root/Desktop   <span class="comment">#另存为  另存为的名字为demo.txt 存储路径是/root/Desktop</span></span><br><span class="line"></span><br><span class="line">:<span class="built_in">set</span> nu        <span class="comment">#显示行号</span></span><br><span class="line">:<span class="built_in">set</span> nonu      <span class="comment">#不显示行号</span></span><br><span class="line"></span><br><span class="line">:65,73 y       <span class="comment">#复制65-73⾏内容</span></span><br><span class="line">:21,42 d       <span class="comment">#删除21-42⾏内容</span></span><br><span class="line"></span><br><span class="line">:50,100 s/man/Man/g  <span class="comment">#将50-100⾏⼩写的man替换成⼤写的MAN</span></span><br><span class="line">:s/man/Man     <span class="comment">#将当前光标所在行的第一个man换成Man</span></span><br><span class="line">:s/man/Man/g   <span class="comment">#将当前光标所在行的所有man换成Man</span></span><br><span class="line">:%s/man/Man/g  <span class="comment">#将全文中所有的man替换成Man</span></span><br><span class="line">:10            <span class="comment">#光标移动到第10行</span></span><br><span class="line"></span><br><span class="line">:r /root/Desktop/man.config   <span class="comment">#读取其他文件内容</span></span><br><span class="line"></span><br><span class="line">/内容     <span class="comment">#表示搜索</span></span><br></pre></td></tr></table></figure><hr><h4 id="0-1-4-使用vim时ctrl-z把程序置于后台解决方法"><a href="#0-1-4-使用vim时ctrl-z把程序置于后台解决方法" class="headerlink" title="0.1.4. 使用vim时ctrl+z把程序置于后台解决方法"></a>0.1.4. 使用vim时ctrl+z把程序置于后台解决方法</h4><p><strong>如果在使用vim编辑器的时候按住了Ctrl+z,把程序置于后台</strong></p><p><strong>可以使用<code>jpbs命令</code>查看后台进程</strong></p><p><img src="/.com//../imgs/ef243215ff6247c0b52f838d8e8c7258.png" alt="在这里插入图片描述"></p><p><strong><code>fg 1</code> 把后台程序恢复到前台</strong>  1指的是后台进程的 编号</p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>包过滤防火墙——firewalld动态防火墙的简单使用</title>
      <link href="/2025/02/02/linux/%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%E2%80%94%E2%80%94firewalld%E5%8A%A8%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/02/02/linux/%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%E2%80%94%E2%80%94firewalld%E5%8A%A8%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<ul><li></li></ul><blockquote><p>firewalld不要与iptables混用</p></blockquote><h2 id="firewald与iptables区别"><a href="#firewald与iptables区别" class="headerlink" title="firewald与iptables区别"></a>firewald与iptables区别</h2><ol><li>iptables 主要是基于接口，来设置规则，从而判断网络的安全性。firewalld 是基于区域，根据不同的区域来设置不同的规则，从而保证网络的安全，与硬件防火墙的设置相类似。</li><li>iptables 防火墙类型为静态防火墙。firewalld 防火墙类型为动态防火墙。</li><li>使用 iptables 每一个单独更改意味着清除所有旧有的规则从 &#x2F;etc&#x2F;sysconfig&#x2F;iptables 里读取所有新的规则。使用 firewalld 却不会再创建任何新的规则，仅仅运行规则中的不同之处。因此 firewalld 可以在运行时间内，改变设置而不丢失现行连接</li><li>iptables 在 &#x2F;etc&#x2F;sysconfig&#x2F;iptables 中储存配置。firewalld 将配置储存在 &#x2F;etc&#x2F;firewalld&#x2F; (优先加载) 和 &#x2F;usr&#x2F;lib&#x2F; firewalld&#x2F; ( 默认的配置文件) 中的各种 XML 文件里。</li></ol><hr><p>  firewalld防火墙为了简化管理，将所有网络流量分为多个区域(zone)。然后根据数据包的源IP地址或传入的网络接口等条件将流量传入相应区域。每个区域都定义了自己打开或者关闭的端口和服务列表 </p><h2 id="firewalld九个区域"><a href="#firewalld九个区域" class="headerlink" title="firewalld九个区域"></a>firewalld九个区域</h2><ul><li>trusted(信任区域)：允许所有的数据包。</li><li>public(公共区域)：拒绝流入的流量，除非与流出的流量相关；而如果是与ssh或dhcpv6-client服务相关 流量，则允许通过</li><li>external(外部区域)：拒绝流入的流量，除非与流出的流量相关；而如果与ssh服务相关流量，则运行通过</li><li>home(家庭区域)：拒绝流入的流量，除非与流出的流量相关；如果是与ssh、mdns、amba-client或dhcpv6-client服务相关 流量，则允许通过</li><li>internal(内部区域)：默认值时与homel区域相同。</li><li>work(工作区域)：拒绝流入的流量，除非与流出的流量相关；而如果是与 ssh、dhcpv6-client服务相关 流量，则允许通过</li><li>dmz(隔离区域也称为非军事区域)：允许与ssh 预定义服务匹配的传入流量，其余均拒绝。</li><li>block(限制区域)：拒绝所有传入流量。</li><li>drop(丢弃区域)：丢弃所有传入流量，并且不产生包含ICMP的错误响应。</li></ul><h2 id="firewalld配置方法"><a href="#firewalld配置方法" class="headerlink" title="firewalld配置方法"></a>firewalld配置方法</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用 firewall-cmd 命令行工具</span><br><span class="line">使用 firewall-config 图形工具</span><br><span class="line">编写 /etc/firewalld/ 中的配置文件</span><br></pre></td></tr></table></figure><h2 id="firewalld参数和命令"><a href="#firewalld参数和命令" class="headerlink" title="firewalld参数和命令"></a>firewalld参数和命令</h2><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>–get-default-zone</td><td>查询默认区域</td></tr><tr><td>–set-default-zone&#x3D;区域名称</td><td>设置默认区域，使其永久生效</td></tr><tr><td>–get-zones</td><td>显示可用区域</td></tr><tr><td>–get-active-zones</td><td>显示当前区域与网卡的名称</td></tr><tr><td>–add-source&#x3D;ip</td><td>将源自此的ip或子网的流量导向指定的区域</td></tr><tr><td>–remove-source&#x3D;ip</td><td><strong>不再</strong>将源自此的ip或子网的流量导向指定的区域</td></tr><tr><td>–add-interface&#x3D;网卡 名称</td><td>将源自此的网卡的流量导向指定的区域</td></tr><tr><td>–change-interface&#x3D;网卡名称</td><td>将某个网卡与区域进行关联</td></tr><tr><td>–list-all</td><td>显示<strong>当前区域</strong>的网卡配置参数、资源、端口及服务信息</td></tr><tr><td>–list-all-zones</td><td>显示<strong>所有区域</strong>的网卡配置参数、资源、端口及服务信息</td></tr><tr><td>–add-service&#x3D;服务名称</td><td>设置默认区域允许该<strong>服务</strong>的流量</td></tr><tr><td>–add-port&#x3D;端口&#x2F;协议</td><td>设置默认区域允许该<strong>端口</strong>的流量</td></tr><tr><td>–remove-service&#x3D;服务名称</td><td><strong>不再</strong>设置默认区域允许该<strong>服务</strong>的流量</td></tr><tr><td>–remove-port&#x3D;端口&#x2F;协议</td><td><strong>不再</strong>设置默认区域允许该<strong>端口</strong>的流量</td></tr><tr><td>–reload</td><td>让永久生效的配置规则 立即生效，并覆盖当前的配置规则</td></tr><tr><td>–panic-on</td><td><strong>开启应急模式</strong></td></tr><tr><td>–panic-off</td><td><strong>关闭应急模式</strong></td></tr><tr><td><strong>–query-masquerade</strong></td><td><strong>检查是否允许伪装IP</strong></td></tr><tr><td><strong>–add-masquerade</strong></td><td><strong>允许防火墙伪装IP</strong></td></tr><tr><td><strong>–remove-masquerade</strong></td><td><strong>禁止防火墙伪装IP</strong></td></tr></tbody></table><h2 id="firewalld两种模式"><a href="#firewalld两种模式" class="headerlink" title="firewalld两种模式"></a>firewalld两种模式</h2><p><strong>运行时模式   Runtime</strong>    </p><ul><li>配置后立即生效，重启后失效</li></ul><p><strong>永久生效模式   permanent</strong></p><ul><li>当前不生效，重启后生效</li></ul><h2 id="firewalld使用"><a href="#firewalld使用" class="headerlink" title="firewalld使用"></a>firewalld使用</h2><ul><li><strong>&#x3D;&#x3D;查看当前使用的区域&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --get-default-zone</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/4d7961752576bd472758d512afbd8b16.png" alt="image-20230902213939584"></p><ul><li><strong>&#x3D;&#x3D;查看指定网卡所在的区域&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --get-zone-of-interface=ens33</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/2411a0d1a36e6eb6ef9e68cd73ecd4e5.png" alt="image-20230902214044715"></p><ul><li><strong>&#x3D;&#x3D;修改当前网卡所在的区域，并永久生效&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=external --change-interface=ens33</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/1d67ca841ba37bfd9040fe9b091bde29.png" alt="image-20230902214225267"></p><p>重启服务器，查看网卡所在区域</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --get-zone-of-interface=ens33</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/9dd25006b67b9791e4afec339beeddcc.png" alt="image-20230902214340197"></p><ul><li><strong>&#x3D;&#x3D;显示当前区域的网卡配置参数、资源、端口及服务信息&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --list-all</span><br></pre></td></tr></table></figure><p>当前处于<code>public</code>区域</p><p><img src="/.com//../imgs/82f76860a436b8dfc579b662e18e1e9c.png" alt="image-20230903121331594"></p><p>现在防火墙处于开启的状态</p><p><img src="/.com//../imgs/0e2104e84b12abd7332493cd45faf19c.png" alt="image-20230903121417608"></p><p>只能允许<code>ssh,dhcpv6-client服务</code>的流量通过</p><p>假如说开启了<code>80端口</code>，要想访问是访问不了的</p><ul><li><strong>&#x3D;&#x3D;给public区域添加http服务&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-service=http</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/aa5b5553e33d42e78ee85097137ce0d9.png" alt="在这里插入图片描述"></p><p>这个时候开启<code>http80端口</code>是可以访问的，但是<strong>上面的配置在重启后配置 会失效</strong></p><p>要想 <code>永久生效</code>必须加上<code>--permanent</code>参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent  --zone=public --add-service=http</span><br></pre></td></tr></table></figure><ul><li><strong>&#x3D;&#x3D;public区域移除http服务&#x3D;&#x3D;</strong></li></ul><p>当前立即生效，如果想永久生效需要加<code>--permanent</code>参数</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --remove-service=http</span><br></pre></td></tr></table></figure><ul><li><strong>&#x3D;&#x3D;在配置规则比较多情况下，让永久生效的配置立即生效，可以使用<code>--reload</code>立即生效&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><ul><li><strong>&#x3D;&#x3D;添加80端口规则&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --permanent --add-port=80/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/6f8a02b9bf73460ccdaa5cd0c32ff661.png" alt="image-20230903123202853"></p><p><img src="/.com//../imgs/37fb878c830eb168b2d912c822dbd488.png" alt="image-20230903123223865"></p><ul><li><strong>&#x3D;&#x3D;修改<code>ssh服务</code>默认端口&#x3D;&#x3D;</strong></li></ul><p>修改ssh默认端口之前需要禁用<code>selinux</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/selinux/config</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/43618595a5b0b7537eada2c85fe689e6.png" alt="image-20230903124508229"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/82bee22bc292d1768f85f09a586c9420.png" alt="image-20230903123711441"></p><p>重启<code>sshd</code>服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure><p>ssh服务默认是22端口，要想连接，需要设置防火墙规则运行<code>2222</code>端口通过</p><p>设置规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --permanent --add-port=2222/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/9660ad9babb7b4040b493aeb36a66d94.png" alt="image-20230903124156804"></p><p>连接<code>2222端口</code></p><p><img src="/.com//../imgs/7c76d70bb889f9b882f03dd2bb6ce826.png" alt="image-20230903130340155"></p><ul><li><strong>&#x3D;&#x3D;端口转发&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure><p>修改<code>ssh</code>连接端口为<code>8888</code></p><p><img src="/.com//../imgs/f8c748a5f74e42c0ba458f577544a11b.png" alt="在这里插入图片描述"></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart sshd.service</span><br></pre></td></tr></table></figure><p>设置规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-forward-port=port=2222:proto=tcp:toport=8888:toaddr=127.0.0.1</span><br></pre></td></tr></table></figure><ul><li><code>--add-forward-port</code> 端口转发</li><li><code>port</code> 从哪个端口来</li><li><code>proto</code> 哪个协议</li><li><code>toport</code>到目的地的哪个端口</li><li><code>toaddr</code>到目的地的哪个地址</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/abae02a713784a66938209da065a7ce9.png" alt="在这里插入图片描述"></p><p>添加好端口转发规则后，是连不上的，从<code>2222</code>端口转发到<code>8888</code>端口，我们只开放了<code>2222</code>端口，并没有开放<code>8888</code>端口，需要再加一条规则</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=8888/tcp</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/6153702bb30f99353444af52e1a02ebd.png" alt="image-20230903132507065"></p><p>发现还是连接不上，最后发现不能 用<code>127.0.0.1</code>这个地址</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-forward-port=port=2222:proto=tcp:toport=8888:toaddr=192.168.80.131</span><br><span class="line"></span><br><span class="line">firewall-cmd  --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/1bfc29726227732373a30974893c3235.png" alt="image-20230903133426268"></p><p>再次连接就成功了</p><p><img src="/.com//../imgs/7ffff0887c76c2d2cbbd96562d9baa3f.png" alt="image-20230903133501868"></p><ul><li><strong>&#x3D;&#x3D;移除端口转发&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --remove-forward-port=port=2222:proto=tcp:toport=8888:toaddr=127.0.0.1</span><br><span class="line"></span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/95feaa1633f4451b9b9e5a17e45e08cc.png" alt="在这里插入图片描述"></p><h2 id="实验"><a href="#实验" class="headerlink" title="实验"></a>实验</h2><blockquote><p><img src="/.com//../imgs/abf1aaca3f358b3a85317f88a088ded0.png" alt="image-20230903144305909"></p></blockquote><p>给Centos添加 一块网卡，划分到<code>LAN区段</code></p><p><img src="/.com//../imgs/2b3eb88c4823e8d168af26a354cd652e.png" alt="image-20230903143048472"></p><p>手动配置 静态IP</p><p>然后<code>ip a</code>，查看新添加的网卡名称为<code>ens36</code></p><p><code>cd  /etc/sysconfig/network-scripts</code>     </p><p><code> cp ifcfg-ens33 ifcfg-ens36</code></p><p><code>vim ifcfg-ens36</code></p><p>修改如下：</p><p><img src="/.com//../imgs/5cad04b2b1448b9f4c799af3d1bf6f81.png" alt="image-20230903140628291"></p><p>重启网卡</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart network.service</span><br></pre></td></tr></table></figure><p>查看IP<br><img src="/.com//../imgs/1b4008ddff01490b9349283bd1739e73.png" alt="在这里插入图片描述"></p><p>然后再开启一台<code>win7</code>，，网卡划分到同一<code>LAN区段</code></p><p>手动配置IP地址</p><p><img src="/.com//../imgs/fa3a9798196169fe45459ec230982cb2.png" alt="image-20230903141431739"></p><p>启动<code>80端口</code></p><p><img src="/.com//../imgs/965ae939fdd7d0e94feb6d3f1fc5b7f1.png" alt="image-20230903141338991"></p><p><img src="/.com//../imgs/282274c51d8d949a31777f81f01d4ac1.png" alt="image-20230903142549013"></p><p>查看两台是否互通 </p><p><img src="/.com//../imgs/f9bc83b4f69974795c394c1f8bc6d6d7.png" alt="image-20230903142154034"></p><p><img src="/.com//../imgs/0de7d81d3e7b405688aeae2f08339a5c.png" alt="在这里插入图片描述"></p><p>这个时候<code>Centos</code>就能够访问<code>Win7</code>的网站了</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl 10.1.1.2</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/077f59f99f3e498791dc95385dd0a6b9.png" alt="在这里插入图片描述"></p><p>首先要让<code>Win11</code>能够访问到<code>Centos</code>的<code>8080</code>端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-port=8080/tcp</span><br></pre></td></tr></table></figure><p>端口转发，让<code>8080</code>端口，能访问到<code>10.1.1.2</code> 的<code>80</code>端口</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --zone=public --add-forward-port=port=8080:proto=tcp:toport=80:toaddr=10.1.1.2</span><br></pre></td></tr></table></figure><p>立即生效防火墙配置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p>允许防火墙伪装IP</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --permanent --add-masquerade</span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/66e9ef34809669dee7a397447543ead4.png" alt="image-20230903145217393"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>包过滤防火墙——iptables静态防火墙的简单使用</title>
      <link href="/2025/02/02/linux/%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%E2%80%94%E2%80%94iptables%E9%9D%99%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/"/>
      <url>/2025/02/02/linux/%E5%8C%85%E8%BF%87%E6%BB%A4%E9%98%B2%E7%81%AB%E5%A2%99%E2%80%94%E2%80%94iptables%E9%9D%99%E6%80%81%E9%98%B2%E7%81%AB%E5%A2%99%E7%9A%84%E7%AE%80%E5%8D%95%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<ul><li></li></ul><blockquote><p> 防火墙就是堵和通的作用</p></blockquote><p>iptables ：包过滤防火墙，是内核防火墙netfilter的管理工具</p><p>核心：四表五链</p><h2 id="规则链的分类–五链"><a href="#规则链的分类–五链" class="headerlink" title="规则链的分类–五链"></a>规则链的分类–五链</h2><p>在进行路由选择前处理的数据包：<strong>PREROUTING</strong></p><p>处理流入的数据包：<strong>INPUT</strong></p><p>处理流出的数据包：<strong>OUTPUT</strong></p><p>处理转发的数据包：<strong>FORWARD</strong></p><p>在进行路由选择后处理的数据包：<strong>POSTROUTING</strong></p><h2 id="处理的动作"><a href="#处理的动作" class="headerlink" title="处理的动作"></a>处理的动作</h2><p>ACCEPT：允许流量通过</p><p>REJECT：拒绝流量通过  （流量拒绝会通知，会返回流量拒绝信息）</p><p>LOG：记录日志信息</p><p>DROP：拒绝流量通过，丢弃  （直接把流量丢弃，不会返回任何值）</p><h2 id="iptables常用参数和作用"><a href="#iptables常用参数和作用" class="headerlink" title="iptables常用参数和作用"></a>iptables常用参数和作用</h2><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-P</td><td>设置默认策略</td></tr><tr><td>-F</td><td>清空规则链</td></tr><tr><td>-L</td><td>查看规则链</td></tr><tr><td>-A</td><td>在规则链的<strong>末尾加</strong>入新的规则</td></tr><tr><td>-l  num</td><td>在规则链的<strong>头部加</strong>入新的规则</td></tr><tr><td>-D num</td><td>在规则链中<strong>删除</strong>某一条规则链</td></tr><tr><td>-s</td><td>匹配来源的ip&#x2F;MASK</td></tr><tr><td>-d</td><td>匹配目标地址</td></tr><tr><td>-i  网卡名称</td><td>匹配这块网卡<strong>流入</strong>的数据</td></tr><tr><td>-o 网卡名称</td><td>匹配这块网卡<strong>流出</strong>的数据</td></tr><tr><td>-p</td><td>匹配<strong>协议</strong>，例如：TCP、UDP、ICMP</td></tr><tr><td>–dport  num</td><td>匹配目标端口号</td></tr><tr><td>–sport  num</td><td>匹配来源端口号</td></tr></tbody></table><blockquote><p>以Centos7和Kali为例</p><p>Centos——IP地址：192.168.80.131</p><p>Kali————IP地址：192.168.80.141</p></blockquote><p>先停止、禁用<code>firewalld</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure><ul><li>&#x3D;&#x3D;<strong>查看规则链</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -L</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/758ad07788534dc983348b14d3a0d44e.png" alt="在这里插入图片描述"></p><ul><li>&#x3D;&#x3D;<strong>清空规则链</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br></pre></td></tr></table></figure><p>其实刚开始在没有配置规则的使用，查看规则链的时候就是空的</p><ul><li>&#x3D;&#x3D;<strong>设置默认规则   ，将流入的流量丢掉</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -P INPUT DROP</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/accf405f0aa1d4b9cfaa3d53a0fc6899.png" alt="image-20230902173734183"></p><p>命令回车 之后会发现，输入任何命令已经没有反应了</p><p>因为我是通过<code>SSH</code>连接到<code>Centos7</code>系统的，流量属于流入的流量，通过<code>iptables -P INPUT DROP</code>命令将流入的流量全部都禁掉了，所以就不能SSH连接了</p><p>主机使用<code>ping</code>命令也会ping不通centos</p><p><img src="/.com//../imgs/e061287e2bb7d9275dd2af52bf1a1e6f.png" alt="image-20230902174220184"></p><ul><li><strong>&#x3D;&#x3D;允许icmp协议流量通过&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p icmp -j ACCEPT</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/d5e794232892c5e2535d2efead729f9c.png" alt="image-20230902180051540"></p><p>再次测试网络连通性就 可以通了</p><p><img src="/.com//../imgs/f68326f45de81fb139ad5ece6b093324.png" alt="image-20230902175255098"></p><p>虽然能ping通,但是ssh还是连接不上 ，因为没有设置允许tcp协议（ssh协议用的是tcp协议） 流量通过</p><ul><li>&#x3D;&#x3D;<strong>可以显示规则的行数</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -nL --line-numbers</span><br></pre></td></tr></table></figure><ul><li>&#x3D;&#x3D;<strong>删除刚才的默认策略</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -D INPUT 1</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/821779127fced8f82f60a6425b12c918.png" alt="image-20230902180227773"></p><ul><li>&#x3D;&#x3D;<strong>允许所有流量通过</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -P INPUT ACCEPT</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/7ca03cbf60701a72a69b2a3828ff884e.png" alt="image-20230902180424300"></p><p>现在<code>SSH</code>就能 连接成功了</p><p><img src="/.com//../imgs/3443707d741661e8af7513b86f1d6bb9.png" alt="image-20230902180605329"></p><ul><li><strong>&#x3D;&#x3D;所有进来的22端口的TCP流量都给拒绝&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 22 -j REJECT</span><br></pre></td></tr></table></figure><p>命令回车后，<code>ssh</code>就不能连接了，已经被拒绝了</p><p><img src="/.com//../imgs/5eb4533fd7ea4ccf5ad2cf2888a951e0.png" alt="image-20230902181045147"></p><p>查看一个规则</p><p><img src="/.com//../imgs/66bf171d5a1516cde991afa4245d603f.png" alt="image-20230902181347523"></p><ul><li><strong>&#x3D;&#x3D;允许192.168.80.0网段的22端口通过&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -s 192.168.80.0/24 -p tcp --dport 22 -j ACCEPT</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/e93b25b5e512cfb2acef33b0203c60e3.png" alt="image-20230902182919230"></p><p>&#x3D;&#x3D;<strong>匹配规则：从上往下</strong>&#x3D;&#x3D;</p><hr><ul><li>&#x3D;&#x3D;<strong>设置某个端口流量全部拒绝</strong>&#x3D;&#x3D;  （UDP、TCP）</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp --dport 80 -j REJECT</span><br><span class="line">iptables -I INPUT -p udp --dport 80 -j REJECT</span><br></pre></td></tr></table></figure><ul><li><strong>&#x3D;&#x3D;在input链中添加某个IP拒绝访问某个端口&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -I INPUT -p tcp -s 192.168.80.1 --dport 8080 -j REJECT</span><br></pre></td></tr></table></figure><p>这里不能直接写真实机的地址，应该写<code>VMnet8</code>的地址，这样才能限制住真实机的访问</p><p><img src="/.com//../imgs/d60b075208b8d96dbf58269ca031fdbb.png" alt="image-20230902190144279"></p><p>Centos开启<code>8080</code>端口服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 -m http.server 8080</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/32ed844161547993c2d48f4ace44c98a.png" alt="image-20230902190340997"></p><p>kali可以访问到</p><p><img src="/.com//../imgs/4fbdaab740bf08452648ddeb242d8653.png" alt="image-20230902184716297"></p><p>真实机就访问不到了</p><p><img src="/.com//../imgs/99675b64e96fe7b2c14eece47445e2f9.png" alt="image-20230902190031690"></p><ul><li><strong>&#x3D;&#x3D;清空所有策略&#x3D;&#x3D;</strong></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -F</span><br></pre></td></tr></table></figure><p><img src="/.com//../imgs/db31e295aab622a7a27809b9a202e1ee.png" alt="image-20230902190449942"></p><ul><li>&#x3D;&#x3D;<strong>禁用某一段端口</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">iptables -A INPUT -p tcp --dport 8000:9000 -j REJECT</span><br></pre></td></tr></table></figure><ul><li>&#x3D;&#x3D;<strong>保存规则</strong>&#x3D;&#x3D;</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iptables-save</span><br><span class="line">iptables-save &gt; 1.txt</span><br></pre></td></tr></table></figure><blockquote><p><a href="https://www.cnblogs.com/ip99/p/15313691.html">https://www.cnblogs.com/ip99/p/15313691.html</a><br><a href="https://www.cnblogs.com/machangwei-8/p/15978257.html">https://www.cnblogs.com/machangwei-8/p/15978257.html</a><br><a href="https://blog.csdn.net/u014644574/article/details/130071097">https://blog.csdn.net/u014644574/article/details/130071097</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
    </entry>
    
    
  
  
</search>
